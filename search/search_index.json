{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"IFC Graph Database","text":"<p> Convert IFC BIM models to Neo4j graph database for querying building information </p> <p> </p> <p>IFC Graph is a Python tool that extracts building elements from IFC (Industry Foundation Classes) BIM model files and stores them in a Neo4j graph database. The tool filters physical entities (walls, doors, windows, columns, etc.) to create a structured graph representation of building components and their relationships.</p> <p></p>"},{"location":"#features","title":"Features","text":"<ul> <li>\ud83d\ude80 Batch Processing - Efficiently processes IFC files using batch database operations</li> <li>\u2699\ufe0f Configurable Element Types - Customize which IFC element types to extract via YAML</li> <li>\ud83d\udd17 Rich Graph Model - Extracts elements, spatial structures, materials, and property sets</li> <li>\ud83d\udee1\ufe0f Safe Database Operations - Optional database clearing with <code>--clear-db</code> flag</li> <li>\ud83d\udd27 CLI Interface - Full command-line interface with multiple options</li> <li>\ud83d\udce6 Python Library - Use as a library in your own Python projects</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"CLIPython <pre><code># Process an IFC file\nifc-graph --ifc-file path/to/model.ifc\n</code></pre> <pre><code>from ifc_graph import filter_physical_elements, save_to_neo4j\n\n# Extract elements from IFC file\nelements, ifc_file = filter_physical_elements(\n    \"path/to/model.ifc\",\n    element_types=['IfcWall', 'IfcDoor', 'IfcWindow']\n)\n\n# Store in Neo4j\nstats = save_to_neo4j(\n    elements, ifc_file,\n    uri=\"bolt://localhost:7687\",\n    username=\"neo4j\",\n    password=\"your_password\"\n)\n</code></pre>"},{"location":"#getting-started","title":"Getting Started","text":"<ul> <li> <p> Installation</p> <p>Install <code>ifc-graph</code> with pip and get up and running in minutes</p> <p> Installation</p> </li> <li> <p> Quick Start</p> <p>Learn the basics of processing IFC files to Neo4j</p> <p> Quick Start</p> </li> <li> <p> Configuration</p> <p>Customize element types and extraction settings</p> <p> Configuration</p> </li> <li> <p> API Reference</p> <p>Detailed API documentation for developers</p> <p> API Reference</p> </li> </ul>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Python 3.9+</li> <li>Neo4j Database (4.x or 5.x)</li> <li>IFC file to process</li> </ul>"},{"location":"#documentation","title":"Documentation","text":"Section Description Getting Started Installation, quick start, and configuration User Guide CLI usage, Python API, and graph model API Reference Detailed API documentation"},{"location":"#license","title":"License","text":"<p>This project is licensed under the MIT License - see the LICENSE file for details.</p>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#quick-start","title":"Quick Start","text":"<pre><code>git clone https://github.com/mugojames254/ifc-graph-database.git\ncd ifc-graph-database\npip install -e \".[dev]\"\n</code></pre>"},{"location":"contributing/#development","title":"Development","text":"<pre><code># Run tests\npytest\n\n# Format code\nblack src/ tests/\n\n# Lint\nruff check src/\n</code></pre>"},{"location":"contributing/#pull-requests","title":"Pull Requests","text":"<ol> <li>Fork the repo</li> <li>Create a branch (<code>git checkout -b feature/your-feature</code>)</li> <li>Make changes and add tests</li> <li>Run <code>pytest</code> and <code>black</code></li> <li>Submit a PR</li> </ol>"},{"location":"contributing/#reporting-issues","title":"Reporting Issues","text":"<p>Open an issue at GitHub Issues with: - Description of the problem - Steps to reproduce - Python version and OS</p>"},{"location":"contributing/#license","title":"License","text":"<p>Contributions are licensed under MIT.</p>"},{"location":"api/","title":"API Reference","text":"<p>Complete API documentation for the <code>ifc-graph</code> Python library.</p>"},{"location":"api/#modules-overview","title":"Modules Overview","text":"<p>The library is organized into three main modules:</p> Module Description element_filter IFC file loading and element extraction neo4j_store Neo4j database operations query_loader Cypher query file management"},{"location":"api/#quick-reference","title":"Quick Reference","text":""},{"location":"api/#primary-functions","title":"Primary Functions","text":"<pre><code>from ifc_graph import filter_physical_elements, save_to_neo4j\n</code></pre> Function Description <code>filter_physical_elements()</code> Extract elements from IFC file <code>save_to_neo4j()</code> Save elements to Neo4j database <code>load_ifc_file()</code> Load and validate IFC file <code>load_query()</code> Load a Cypher query from file"},{"location":"api/#classes","title":"Classes","text":"<pre><code>from ifc_graph import IFCElementFilter, Neo4jConnection, QueryLoader\n</code></pre> Class Description <code>IFCElementFilter</code> OOP interface for element extraction <code>Neo4jConnection</code> Database connection manager with retry logic <code>QueryLoader</code> Cypher query file loader with caching"},{"location":"api/#exceptions","title":"Exceptions","text":"<pre><code>from ifc_graph import (\n    IFCLoadError,\n    IFCValidationError,\n    DatabaseConnectionError,\n    DatabaseOperationError,\n)\n</code></pre> Exception Description <code>IFCLoadError</code> Error loading IFC file <code>IFCValidationError</code> IFC file validation failed <code>DatabaseConnectionError</code> Cannot connect to Neo4j <code>DatabaseOperationError</code> Database operation failed"},{"location":"api/#detailed-documentation","title":"Detailed Documentation","text":"<p>For complete API documentation with method signatures and examples, see the individual module pages:</p> <ul> <li>Element Filter - IFC file loading, validation, and element extraction</li> <li>Neo4j Store - Database connection management and batch operations</li> <li>Query Loader - Cypher query file management and caching</li> </ul>"},{"location":"api/#import-examples","title":"Import Examples","text":""},{"location":"api/#import-everything","title":"Import Everything","text":"<pre><code>from ifc_graph import (\n    # Element Filter\n    IFCElementFilter,\n    IFCLoadError,\n    IFCValidationError,\n    filter_physical_elements,\n    load_ifc_file,\n    extract_element_properties,\n    extract_spatial_info,\n    extract_material_info,\n    extract_property_sets,\n    # Neo4j Store\n    Neo4jConnection,\n    DatabaseConnectionError,\n    DatabaseOperationError,\n    save_to_neo4j,\n    # Query Loader\n    QueryLoader,\n    load_query,\n)\n</code></pre>"},{"location":"api/#import-only-what-you-need","title":"Import Only What You Need","text":"<pre><code># For simple processing\nfrom ifc_graph import filter_physical_elements, save_to_neo4j\n\n# For custom extraction\nfrom ifc_graph import IFCElementFilter, Neo4jConnection\n\n# For error handling\nfrom ifc_graph import IFCLoadError, DatabaseConnectionError\n</code></pre>"},{"location":"api/#version-information","title":"Version Information","text":"<pre><code>from ifc_graph import __version__\n\nprint(__version__)  # \"0.1.0\"\n</code></pre>"},{"location":"api/#see-also","title":"See Also","text":"<ul> <li>User Guide - Practical usage examples</li> </ul>"},{"location":"api/element-filter/","title":"Element Filter API","text":"<p>The <code>element_filter</code> module handles IFC file loading and element extraction.</p>"},{"location":"api/element-filter/#classes","title":"Classes","text":""},{"location":"api/element-filter/#ifcelementfilter","title":"IFCElementFilter","text":"<p>Object-oriented interface for filtering IFC elements.</p> <pre><code>from ifc_graph import IFCElementFilter\n\nfilter = IFCElementFilter(\n    file_path=\"model.ifc\",\n    config={\n        'include_property_sets': True,\n        'include_materials': True,\n        'max_properties_per_element': 50,\n    }\n)\n\n# Load and extract\nelements, ifc_file = filter.extract_elements(\n    element_types=['IfcWall', 'IfcDoor']\n)\n</code></pre> <p>Filter and extract elements from IFC files.</p> <p>This class provides a convenient interface for loading IFC files and extracting elements with their properties.</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>class IFCElementFilter:\n    \"\"\"\n    Filter and extract elements from IFC files.\n\n    This class provides a convenient interface for loading IFC files\n    and extracting elements with their properties.\n    \"\"\"\n\n    def __init__(self, file_path: str, config: Optional[dict] = None):\n        \"\"\"\n        Initialize the IFC element filter.\n\n        Args:\n            file_path: Path to the IFC file\n            config: Optional extraction configuration\n        \"\"\"\n        self.file_path = file_path\n        self.config = config or {\n            'include_property_sets': True,\n            'include_materials': True,\n            'max_properties_per_element': 50,\n        }\n        self._ifc_file = None\n\n    def load(self) -&gt; ifcopenshell.file:\n        \"\"\"Load the IFC file.\"\"\"\n        self._ifc_file = load_ifc_file(self.file_path)\n        return self._ifc_file\n\n    @property\n    def ifc_file(self) -&gt; ifcopenshell.file:\n        \"\"\"Get the loaded IFC file, loading it if necessary.\"\"\"\n        if self._ifc_file is None:\n            self.load()\n        return self._ifc_file\n\n    def extract_elements(\n        self, \n        element_types: Optional[list[str]] = None\n    ) -&gt; tuple[dict, ifcopenshell.file]:\n        \"\"\"\n        Extract elements from the IFC file.\n\n        Args:\n            element_types: List of IFC element types to extract\n\n        Returns:\n            Tuple of (filtered_elements dictionary, ifc_file object)\n        \"\"\"\n        return filter_physical_elements(\n            self.file_path,\n            element_types=element_types,\n            config=self.config\n        )\n</code></pre>"},{"location":"api/element-filter/#ifc_graph.element_filter.IFCElementFilter.ifc_file","title":"<code>ifc_file</code>  <code>property</code>","text":"<p>Get the loaded IFC file, loading it if necessary.</p>"},{"location":"api/element-filter/#ifc_graph.element_filter.IFCElementFilter.__init__","title":"<code>__init__(file_path, config=None)</code>","text":"<p>Initialize the IFC element filter.</p> <p>Parameters:</p> Name Type Description Default <code>file_path</code> <code>str</code> <p>Path to the IFC file</p> required <code>config</code> <code>Optional[dict]</code> <p>Optional extraction configuration</p> <code>None</code> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>def __init__(self, file_path: str, config: Optional[dict] = None):\n    \"\"\"\n    Initialize the IFC element filter.\n\n    Args:\n        file_path: Path to the IFC file\n        config: Optional extraction configuration\n    \"\"\"\n    self.file_path = file_path\n    self.config = config or {\n        'include_property_sets': True,\n        'include_materials': True,\n        'max_properties_per_element': 50,\n    }\n    self._ifc_file = None\n</code></pre>"},{"location":"api/element-filter/#ifc_graph.element_filter.IFCElementFilter.extract_elements","title":"<code>extract_elements(element_types=None)</code>","text":"<p>Extract elements from the IFC file.</p> <p>Parameters:</p> Name Type Description Default <code>element_types</code> <code>Optional[list[str]]</code> <p>List of IFC element types to extract</p> <code>None</code> <p>Returns:</p> Type Description <code>tuple[dict, file]</code> <p>Tuple of (filtered_elements dictionary, ifc_file object)</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>def extract_elements(\n    self, \n    element_types: Optional[list[str]] = None\n) -&gt; tuple[dict, ifcopenshell.file]:\n    \"\"\"\n    Extract elements from the IFC file.\n\n    Args:\n        element_types: List of IFC element types to extract\n\n    Returns:\n        Tuple of (filtered_elements dictionary, ifc_file object)\n    \"\"\"\n    return filter_physical_elements(\n        self.file_path,\n        element_types=element_types,\n        config=self.config\n    )\n</code></pre>"},{"location":"api/element-filter/#ifc_graph.element_filter.IFCElementFilter.load","title":"<code>load()</code>","text":"<p>Load the IFC file.</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>def load(self) -&gt; ifcopenshell.file:\n    \"\"\"Load the IFC file.\"\"\"\n    self._ifc_file = load_ifc_file(self.file_path)\n    return self._ifc_file\n</code></pre>"},{"location":"api/element-filter/#exceptions","title":"Exceptions","text":""},{"location":"api/element-filter/#ifcloaderror","title":"IFCLoadError","text":"<p>Raised when there's an error loading an IFC file.</p> <pre><code>from ifc_graph import IFCLoadError\n\ntry:\n    elements, ifc_file = filter_physical_elements(\"invalid.ifc\")\nexcept IFCLoadError as e:\n    print(f\"Failed to load file: {e}\")\n</code></pre> <p>               Bases: <code>Exception</code></p> <p>Raised when there's an error loading an IFC file.</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>class IFCLoadError(Exception):\n    \"\"\"Raised when there's an error loading an IFC file.\"\"\"\n    pass\n</code></pre>"},{"location":"api/element-filter/#ifcvalidationerror","title":"IFCValidationError","text":"<p>Raised when an IFC file fails validation (doesn't exist, wrong extension, empty).</p> <pre><code>from ifc_graph import IFCValidationError\n\ntry:\n    elements, ifc_file = filter_physical_elements(\"missing.ifc\")\nexcept IFCValidationError as e:\n    print(f\"Invalid file: {e}\")\n</code></pre> <p>               Bases: <code>Exception</code></p> <p>Raised when an IFC file fails validation.</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>class IFCValidationError(Exception):\n    \"\"\"Raised when an IFC file fails validation.\"\"\"\n    pass\n</code></pre>"},{"location":"api/element-filter/#functions","title":"Functions","text":""},{"location":"api/element-filter/#filter_physical_elements","title":"filter_physical_elements","text":"<p>The main function for extracting elements from IFC files.</p> <pre><code>from ifc_graph import filter_physical_elements\n\nelements, ifc_file = filter_physical_elements(\n    ifc_file_path=\"model.ifc\",\n    element_types=['IfcWall', 'IfcDoor', 'IfcWindow'],\n    config={\n        'include_property_sets': True,\n        'include_materials': True,\n        'max_properties_per_element': 50,\n    }\n)\n\n# elements is a dict: {'IfcWall': [...], 'IfcDoor': [...], ...}\n# ifc_file is the loaded ifcopenshell.file object\n</code></pre> <p>Filters specific physical elements from an IFC file.</p> <p>Parameters:</p> Name Type Description Default <code>ifc_file_path</code> <code>str</code> <p>Path to the IFC file</p> required <code>element_types</code> <code>Optional[list[str]]</code> <p>List of IFC element types to extract (e.g., ['IfcWall', 'IfcDoor'])</p> <code>None</code> <code>config</code> <code>Optional[dict]</code> <p>Extraction configuration dictionary</p> <code>None</code> <p>Returns:</p> Type Description <code>tuple[dict, file]</code> <p>Tuple of (filtered_elements dictionary, ifc_file object)</p> <p>Raises:</p> Type Description <code>IFCLoadError</code> <p>If the file cannot be loaded</p> <code>IFCValidationError</code> <p>If the file is invalid</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>def filter_physical_elements(\n    ifc_file_path: str,\n    element_types: Optional[list[str]] = None,\n    config: Optional[dict] = None\n) -&gt; tuple[dict, ifcopenshell.file]:\n    \"\"\"\n    Filters specific physical elements from an IFC file.\n\n    Args:\n        ifc_file_path: Path to the IFC file\n        element_types: List of IFC element types to extract (e.g., ['IfcWall', 'IfcDoor'])\n        config: Extraction configuration dictionary\n\n    Returns:\n        Tuple of (filtered_elements dictionary, ifc_file object)\n\n    Raises:\n        IFCLoadError: If the file cannot be loaded\n        IFCValidationError: If the file is invalid\n    \"\"\"\n    # Default element types if none provided\n    if element_types is None:\n        element_types = [\n            'IfcWall', \n            'IfcDoor', \n            'IfcWindow', \n            'IfcStair',\n            'IfcSlab',\n            'IfcRoof',\n            'IfcColumn',\n            'IfcBeam'\n        ]\n\n    if config is None:\n        config = {\n            'include_property_sets': True,\n            'include_materials': True,\n            'max_properties_per_element': 50,\n        }\n\n    logger.info(f\"Loading IFC file: {ifc_file_path}\")\n    start_time = time.time()\n\n    # Load the IFC file with error handling\n    ifc_file = load_ifc_file(ifc_file_path)\n\n    # Dictionary to store elements by type\n    filtered_elements = {}\n\n    # Filter elements\n    for element_type in element_types:\n        try:\n            elements = ifc_file.by_type(element_type)\n            if elements:\n                filtered_elements[element_type] = elements\n                logger.info(f\"Found {len(elements)} {element_type} elements\")\n        except Exception as e:\n            logger.warning(f\"Error filtering {element_type}: {e}\")\n\n    load_time = time.time() - start_time\n    total_elements = sum(len(elems) for elems in filtered_elements.values())\n    logger.info(f\"Filtered {total_elements} elements in {load_time:.2f} seconds\")\n\n    return filtered_elements, ifc_file\n</code></pre>"},{"location":"api/element-filter/#load_ifc_file","title":"load_ifc_file","text":"<p>Load an IFC file with validation and error handling.</p> <pre><code>from ifc_graph import load_ifc_file\n\nifc_file = load_ifc_file(\"model.ifc\")\nwalls = ifc_file.by_type('IfcWall')\n</code></pre> <p>Load an IFC file with error handling.</p> <p>Parameters:</p> Name Type Description Default <code>file_path</code> <code>str</code> <p>Path to the IFC file</p> required <p>Returns:</p> Type Description <code>file</code> <p>Loaded IFC file object</p> <p>Raises:</p> Type Description <code>IFCLoadError</code> <p>If there's an error loading the file</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>def load_ifc_file(file_path: str) -&gt; ifcopenshell.file:\n    \"\"\"\n    Load an IFC file with error handling.\n\n    Args:\n        file_path: Path to the IFC file\n\n    Returns:\n        Loaded IFC file object\n\n    Raises:\n        IFCLoadError: If there's an error loading the file\n    \"\"\"\n    try:\n        validate_ifc_file(file_path)\n        logger.info(f\"Loading IFC file: {file_path}\")\n        return ifcopenshell.open(file_path)\n    except IFCValidationError:\n        raise\n    except Exception as e:\n        raise IFCLoadError(f\"Failed to load IFC file: {file_path}. Error: {e}\") from e\n</code></pre>"},{"location":"api/element-filter/#validate_ifc_file","title":"validate_ifc_file","text":"<p>Validate that an IFC file exists and is accessible.</p> <pre><code>from ifc_graph.element_filter import validate_ifc_file, IFCValidationError\n\ntry:\n    validate_ifc_file(\"model.ifc\")\n    print(\"File is valid\")\nexcept IFCValidationError as e:\n    print(f\"Validation failed: {e}\")\n</code></pre> <p>Validate that an IFC file exists and is accessible.</p> <p>Parameters:</p> Name Type Description Default <code>file_path</code> <code>str</code> <p>Path to the IFC file</p> required <p>Raises:</p> Type Description <code>IFCValidationError</code> <p>If the file is invalid or inaccessible</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>def validate_ifc_file(file_path: str) -&gt; None:\n    \"\"\"\n    Validate that an IFC file exists and is accessible.\n\n    Args:\n        file_path: Path to the IFC file\n\n    Raises:\n        IFCValidationError: If the file is invalid or inaccessible\n    \"\"\"\n    from pathlib import Path\n\n    path = Path(file_path)\n\n    if not path.exists():\n        raise IFCValidationError(f\"IFC file not found: {file_path}\")\n\n    if not path.is_file():\n        raise IFCValidationError(f\"Path is not a file: {file_path}\")\n\n    if path.suffix.lower() not in ['.ifc', '.ifczip']:\n        raise IFCValidationError(f\"Invalid file extension: {path.suffix}. Expected .ifc or .ifczip\")\n\n    if path.stat().st_size == 0:\n        raise IFCValidationError(f\"IFC file is empty: {file_path}\")\n</code></pre>"},{"location":"api/element-filter/#extract_element_properties","title":"extract_element_properties","text":"<p>Extract properties from a single IFC element for graph storage.</p> <pre><code>from ifc_graph import extract_element_properties, load_ifc_file\n\nifc_file = load_ifc_file(\"model.ifc\")\nelement = ifc_file.by_type('IfcWall')[0]\n\nprops = extract_element_properties(element, config={})\n# Returns: {'id': '123', 'name': 'Wall', 'guid': '...', 'type': 'IfcWall', ...}\n</code></pre> <p>Extract properties from an IFC element for graph storage.</p> <p>Parameters:</p> Name Type Description Default <code>element</code> <code>Any</code> <p>IFC element to extract properties from</p> required <code>config</code> <code>dict</code> <p>Extraction configuration</p> required <p>Returns:</p> Type Description <code>dict[str, Any]</code> <p>Dictionary of extracted properties</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>def extract_element_properties(element: Any, config: dict) -&gt; dict[str, Any]:\n    \"\"\"\n    Extract properties from an IFC element for graph storage.\n\n    Args:\n        element: IFC element to extract properties from\n        config: Extraction configuration\n\n    Returns:\n        Dictionary of extracted properties\n    \"\"\"\n    props = {\n        'id': str(element.id()),\n        'name': getattr(element, 'Name', None) or 'Unnamed',\n        'guid': getattr(element, 'GlobalId', '') or '',\n        'type': element.is_a(),\n        'object_type': getattr(element, 'ObjectType', None) or '',\n        'description': getattr(element, 'Description', None) or '',\n        'tag': getattr(element, 'Tag', None) or '',\n    }\n\n    return props\n</code></pre>"},{"location":"api/element-filter/#extract_spatial_info","title":"extract_spatial_info","text":"<p>Extract spatial containment information for an element.</p> <pre><code>from ifc_graph import extract_spatial_info, load_ifc_file\n\nifc_file = load_ifc_file(\"model.ifc\")\nelement = ifc_file.by_type('IfcWall')[0]\n\nspatial = extract_spatial_info(element)\n# Returns: [{'id': '456', 'name': 'Level 1', 'type': 'IfcBuildingStorey', ...}]\n</code></pre> <p>Extract spatial containment information for an element.</p> <p>Parameters:</p> Name Type Description Default <code>element</code> <code>Any</code> <p>IFC element to extract spatial info from</p> required <p>Returns:</p> Type Description <code>list[dict]</code> <p>List of spatial structure information dictionaries</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>def extract_spatial_info(element: Any) -&gt; list[dict]:\n    \"\"\"\n    Extract spatial containment information for an element.\n\n    Args:\n        element: IFC element to extract spatial info from\n\n    Returns:\n        List of spatial structure information dictionaries\n    \"\"\"\n    spatial_info = []\n\n    try:\n        if hasattr(element, 'ContainedInStructure') and element.ContainedInStructure:\n            for rel in element.ContainedInStructure:\n                if rel.RelatingStructure:\n                    structure = rel.RelatingStructure\n                    spatial_info.append({\n                        'id': str(structure.id()),\n                        'name': getattr(structure, 'Name', None) or 'Unnamed',\n                        'type': structure.is_a(),\n                        'long_name': getattr(structure, 'LongName', None) or '',\n                        'elevation': _get_elevation(structure),\n                    })\n    except Exception as e:\n        logger.debug(f\"Error extracting spatial info for element {element.id()}: {e}\")\n\n    return spatial_info\n</code></pre>"},{"location":"api/element-filter/#extract_material_info","title":"extract_material_info","text":"<p>Extract material information for an element.</p> <pre><code>from ifc_graph import extract_material_info, load_ifc_file\n\nifc_file = load_ifc_file(\"model.ifc\")\nelement = ifc_file.by_type('IfcWall')[0]\n\nmaterials = extract_material_info(element)\n# Returns: [{'element_id': '123', 'material_id': '789', 'material_name': 'Concrete', ...}]\n</code></pre> <p>Extract material information for an element.</p> <p>Parameters:</p> Name Type Description Default <code>element</code> <code>Any</code> <p>IFC element to extract material info from</p> required <p>Returns:</p> Type Description <code>list[dict]</code> <p>List of material information dictionaries</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>def extract_material_info(element: Any) -&gt; list[dict]:\n    \"\"\"\n    Extract material information for an element.\n\n    Args:\n        element: IFC element to extract material info from\n\n    Returns:\n        List of material information dictionaries\n    \"\"\"\n    materials = []\n\n    try:\n        if hasattr(element, 'HasAssociations'):\n            for association in element.HasAssociations:\n                if association.is_a('IfcRelAssociatesMaterial'):\n                    material_select = association.RelatingMaterial\n                    materials.extend(_process_material(material_select, element))\n    except Exception as e:\n        logger.debug(f\"Error extracting materials for element {element.id()}: {e}\")\n\n    return materials\n</code></pre>"},{"location":"api/element-filter/#extract_property_sets","title":"extract_property_sets","text":"<p>Extract property sets for an element.</p> <pre><code>from ifc_graph import extract_property_sets, load_ifc_file\n\nifc_file = load_ifc_file(\"model.ifc\")\nelement = ifc_file.by_type('IfcWall')[0]\n\npsets = extract_property_sets(element, max_properties=50)\n# Returns: [{'element_id': '123', 'pset_name': 'Pset_WallCommon', 'properties': {...}}]\n</code></pre> <p>Extract property sets for an element.</p> <p>Parameters:</p> Name Type Description Default <code>element</code> <code>Any</code> <p>IFC element to extract property sets from</p> required <code>max_properties</code> <code>int</code> <p>Maximum number of properties to extract per element</p> <code>50</code> <p>Returns:</p> Type Description <code>list[dict]</code> <p>List of property set information dictionaries</p> Source code in <code>src/ifc_graph/element_filter.py</code> <pre><code>def extract_property_sets(element: Any, max_properties: int = 50) -&gt; list[dict]:\n    \"\"\"\n    Extract property sets for an element.\n\n    Args:\n        element: IFC element to extract property sets from\n        max_properties: Maximum number of properties to extract per element\n\n    Returns:\n        List of property set information dictionaries\n    \"\"\"\n    property_sets = []\n    total_props = 0\n\n    try:\n        if hasattr(element, 'IsDefinedBy'):\n            for definition in element.IsDefinedBy:\n                if total_props &gt;= max_properties:\n                    break\n\n                if definition.is_a('IfcRelDefinesByProperties'):\n                    prop_def = definition.RelatingPropertyDefinition\n\n                    if prop_def.is_a('IfcPropertySet'):\n                        pset_data = {\n                            'element_id': str(element.id()),\n                            'pset_id': str(prop_def.id()),\n                            'pset_name': prop_def.Name or 'Unnamed',\n                            'properties': {}\n                        }\n\n                        if hasattr(prop_def, 'HasProperties'):\n                            for prop in prop_def.HasProperties:\n                                if total_props &gt;= max_properties:\n                                    break\n\n                                prop_value = _get_property_value(prop)\n                                if prop_value is not None:\n                                    pset_data['properties'][prop.Name] = prop_value\n                                    total_props += 1\n\n                        if pset_data['properties']:\n                            property_sets.append(pset_data)\n\n    except Exception as e:\n        logger.debug(f\"Error extracting property sets for element {element.id()}: {e}\")\n\n    return property_sets\n</code></pre>"},{"location":"api/element-filter/#configuration-options","title":"Configuration Options","text":"<p>The <code>config</code> parameter accepts a dictionary with these options:</p> Option Type Default Description <code>include_property_sets</code> bool <code>True</code> Extract property sets <code>include_materials</code> bool <code>True</code> Extract material info <code>max_properties_per_element</code> int <code>50</code> Max properties to extract per element"},{"location":"api/element-filter/#example-configuration","title":"Example Configuration","text":"<pre><code>config = {\n    'include_property_sets': True,\n    'include_materials': True,\n    'max_properties_per_element': 100,\n}\n\nelements, ifc_file = filter_physical_elements(\n    \"model.ifc\",\n    element_types=['IfcWall'],\n    config=config\n)\n</code></pre>"},{"location":"api/element-filter/#default-element-types","title":"Default Element Types","text":"<p>When <code>element_types</code> is not provided, these types are extracted:</p> <ul> <li><code>IfcWall</code></li> <li><code>IfcDoor</code></li> <li><code>IfcWindow</code></li> <li><code>IfcStair</code></li> <li><code>IfcSlab</code></li> <li><code>IfcRoof</code></li> <li><code>IfcColumn</code></li> <li><code>IfcBeam</code></li> </ul>"},{"location":"api/element-filter/#see-also","title":"See Also","text":"<ul> <li>Neo4j Store API - Database operations</li> <li>Python API Guide - Usage examples</li> </ul>"},{"location":"api/neo4j-store/","title":"Neo4j Store API","text":"<p>The <code>neo4j_store</code> module handles Neo4j database operations including connection management and batch data insertion.</p>"},{"location":"api/neo4j-store/#classes","title":"Classes","text":""},{"location":"api/neo4j-store/#neo4jconnection","title":"Neo4jConnection","text":"<p>Manages Neo4j database connections with retry logic and proper cleanup.</p> <pre><code>from ifc_graph import Neo4jConnection\n\n# Using context manager (recommended)\nwith Neo4jConnection(\n    uri=\"bolt://localhost:7687\",\n    username=\"neo4j\",\n    password=\"password\",\n    max_retries=3,\n    retry_delay=1.0\n) as conn:\n    with conn.session() as session:\n        result = session.run(\"MATCH (n) RETURN count(n)\")\n        print(result.single()[0])\n</code></pre> <p>Manages Neo4j database connections with retry logic and proper cleanup.</p> Source code in <code>src/ifc_graph/neo4j_store.py</code> <pre><code>class Neo4jConnection:\n    \"\"\"\n    Manages Neo4j database connections with retry logic and proper cleanup.\n    \"\"\"\n\n    def __init__(\n        self,\n        uri: str,\n        username: str,\n        password: str,\n        max_retries: int = 3,\n        retry_delay: float = 1.0\n    ):\n        self.uri = uri\n        self.username = username\n        self.password = password\n        self.max_retries = max_retries\n        self.retry_delay = retry_delay\n        self._driver = None\n\n    def connect(self) -&gt; None:\n        \"\"\"\n        Establish connection to Neo4j database with retry logic.\n\n        Raises:\n            DatabaseConnectionError: If connection cannot be established\n        \"\"\"\n        last_error = None\n\n        for attempt in range(1, self.max_retries + 1):\n            try:\n                logger.info(f\"Connecting to Neo4j (attempt {attempt}/{self.max_retries})...\")\n                self._driver = GraphDatabase.driver(\n                    self.uri,\n                    auth=(self.username, self.password)\n                )\n                # Verify connection\n                self._driver.verify_connectivity()\n                logger.info(\"Successfully connected to Neo4j\")\n                return\n\n            except AuthError as e:\n                raise DatabaseConnectionError(\n                    f\"Authentication failed. Check username/password: {e}\"\n                ) from e\n\n            except ServiceUnavailable as e:\n                last_error = e\n                if attempt &lt; self.max_retries:\n                    logger.warning(\n                        f\"Connection attempt {attempt} failed. Retrying in {self.retry_delay}s...\"\n                    )\n                    time.sleep(self.retry_delay)\n\n            except Exception as e:\n                raise DatabaseConnectionError(\n                    f\"Unexpected error connecting to Neo4j: {e}\"\n                ) from e\n\n        raise DatabaseConnectionError(\n            f\"Failed to connect after {self.max_retries} attempts: {last_error}\"\n        )\n\n    def close(self) -&gt; None:\n        \"\"\"Close the database connection.\"\"\"\n        if self._driver:\n            self._driver.close()\n            self._driver = None\n            logger.info(\"Neo4j connection closed\")\n\n    @contextmanager\n    def session(self):\n        \"\"\"Context manager for database sessions.\"\"\"\n        if not self._driver:\n            raise DatabaseConnectionError(\"Not connected to database\")\n\n        session = self._driver.session()\n        try:\n            yield session\n        finally:\n            session.close()\n\n    def __enter__(self):\n        self.connect()\n        return self\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        self.close()\n</code></pre>"},{"location":"api/neo4j-store/#ifc_graph.neo4j_store.Neo4jConnection.__init__","title":"<code>__init__(uri, username, password, max_retries=3, retry_delay=1.0)</code>","text":"Source code in <code>src/ifc_graph/neo4j_store.py</code> <pre><code>def __init__(\n    self,\n    uri: str,\n    username: str,\n    password: str,\n    max_retries: int = 3,\n    retry_delay: float = 1.0\n):\n    self.uri = uri\n    self.username = username\n    self.password = password\n    self.max_retries = max_retries\n    self.retry_delay = retry_delay\n    self._driver = None\n</code></pre>"},{"location":"api/neo4j-store/#ifc_graph.neo4j_store.Neo4jConnection.connect","title":"<code>connect()</code>","text":"<p>Establish connection to Neo4j database with retry logic.</p> <p>Raises:</p> Type Description <code>DatabaseConnectionError</code> <p>If connection cannot be established</p> Source code in <code>src/ifc_graph/neo4j_store.py</code> <pre><code>def connect(self) -&gt; None:\n    \"\"\"\n    Establish connection to Neo4j database with retry logic.\n\n    Raises:\n        DatabaseConnectionError: If connection cannot be established\n    \"\"\"\n    last_error = None\n\n    for attempt in range(1, self.max_retries + 1):\n        try:\n            logger.info(f\"Connecting to Neo4j (attempt {attempt}/{self.max_retries})...\")\n            self._driver = GraphDatabase.driver(\n                self.uri,\n                auth=(self.username, self.password)\n            )\n            # Verify connection\n            self._driver.verify_connectivity()\n            logger.info(\"Successfully connected to Neo4j\")\n            return\n\n        except AuthError as e:\n            raise DatabaseConnectionError(\n                f\"Authentication failed. Check username/password: {e}\"\n            ) from e\n\n        except ServiceUnavailable as e:\n            last_error = e\n            if attempt &lt; self.max_retries:\n                logger.warning(\n                    f\"Connection attempt {attempt} failed. Retrying in {self.retry_delay}s...\"\n                )\n                time.sleep(self.retry_delay)\n\n        except Exception as e:\n            raise DatabaseConnectionError(\n                f\"Unexpected error connecting to Neo4j: {e}\"\n            ) from e\n\n    raise DatabaseConnectionError(\n        f\"Failed to connect after {self.max_retries} attempts: {last_error}\"\n    )\n</code></pre>"},{"location":"api/neo4j-store/#ifc_graph.neo4j_store.Neo4jConnection.close","title":"<code>close()</code>","text":"<p>Close the database connection.</p> Source code in <code>src/ifc_graph/neo4j_store.py</code> <pre><code>def close(self) -&gt; None:\n    \"\"\"Close the database connection.\"\"\"\n    if self._driver:\n        self._driver.close()\n        self._driver = None\n        logger.info(\"Neo4j connection closed\")\n</code></pre>"},{"location":"api/neo4j-store/#ifc_graph.neo4j_store.Neo4jConnection.session","title":"<code>session()</code>","text":"<p>Context manager for database sessions.</p> Source code in <code>src/ifc_graph/neo4j_store.py</code> <pre><code>@contextmanager\ndef session(self):\n    \"\"\"Context manager for database sessions.\"\"\"\n    if not self._driver:\n        raise DatabaseConnectionError(\"Not connected to database\")\n\n    session = self._driver.session()\n    try:\n        yield session\n    finally:\n        session.close()\n</code></pre>"},{"location":"api/neo4j-store/#constructor-parameters","title":"Constructor Parameters","text":"Parameter Type Default Description <code>uri</code> str - Neo4j connection URI (e.g., \"bolt://localhost:7687\") <code>username</code> str - Neo4j username <code>password</code> str - Neo4j password <code>max_retries</code> int 3 Maximum connection retry attempts <code>retry_delay</code> float 1.0 Delay between retries in seconds"},{"location":"api/neo4j-store/#methods","title":"Methods","text":""},{"location":"api/neo4j-store/#connect","title":"connect()","text":"<p>Establish connection to Neo4j with retry logic.</p> <pre><code>conn = Neo4jConnection(uri, username, password)\nconn.connect()  # Raises DatabaseConnectionError on failure\n</code></pre>"},{"location":"api/neo4j-store/#close","title":"close()","text":"<p>Close the database connection.</p> <pre><code>conn.close()\n</code></pre>"},{"location":"api/neo4j-store/#session","title":"session()","text":"<p>Context manager for database sessions.</p> <pre><code>with conn.session() as session:\n    session.run(\"MATCH (n) RETURN n\")\n</code></pre>"},{"location":"api/neo4j-store/#context-manager-usage","title":"Context Manager Usage","text":"<pre><code># Automatically connects and disconnects\nwith Neo4jConnection(uri, user, password) as conn:\n    with conn.session() as session:\n        # Use session\n        pass\n# Connection closed automatically\n</code></pre>"},{"location":"api/neo4j-store/#exceptions","title":"Exceptions","text":""},{"location":"api/neo4j-store/#databaseconnectionerror","title":"DatabaseConnectionError","text":"<p>Raised when there's an error connecting to the database.</p> <pre><code>from ifc_graph import DatabaseConnectionError\n\ntry:\n    with Neo4jConnection(uri, user, password) as conn:\n        pass\nexcept DatabaseConnectionError as e:\n    print(f\"Connection failed: {e}\")\n</code></pre> <p>Common causes: - Neo4j not running - Wrong URI - Invalid credentials - Network issues</p> <p>               Bases: <code>Exception</code></p> <p>Raised when there's an error connecting to the database.</p> Source code in <code>src/ifc_graph/neo4j_store.py</code> <pre><code>class DatabaseConnectionError(Exception):\n    \"\"\"Raised when there's an error connecting to the database.\"\"\"\n    pass\n</code></pre>"},{"location":"api/neo4j-store/#databaseoperationerror","title":"DatabaseOperationError","text":"<p>Raised when a database operation fails.</p> <pre><code>from ifc_graph import DatabaseOperationError\n\ntry:\n    stats = save_to_neo4j(elements, ifc_file, uri, user, password)\nexcept DatabaseOperationError as e:\n    print(f\"Operation failed: {e}\")\n</code></pre> <p>Common causes: - Query syntax error - Constraint violation - Transaction timeout</p> <p>               Bases: <code>Exception</code></p> <p>Raised when a database operation fails.</p> Source code in <code>src/ifc_graph/neo4j_store.py</code> <pre><code>class DatabaseOperationError(Exception):\n    \"\"\"Raised when a database operation fails.\"\"\"\n    pass\n</code></pre>"},{"location":"api/neo4j-store/#functions","title":"Functions","text":""},{"location":"api/neo4j-store/#save_to_neo4j","title":"save_to_neo4j","text":"<p>The main function for saving IFC elements to Neo4j.</p> <pre><code>from ifc_graph import filter_physical_elements, save_to_neo4j\n\nelements, ifc_file = filter_physical_elements(\"model.ifc\")\n\nstats = save_to_neo4j(\n    filtered_elements=elements,\n    ifc_file=ifc_file,\n    uri=\"bolt://localhost:7687\",\n    username=\"neo4j\",\n    password=\"password\",\n    clear_db=False,\n    config={\n        'include_materials': True,\n        'include_property_sets': True,\n        'max_properties_per_element': 50,\n    }\n)\n\nprint(f\"Elements: {stats['elements']}\")\nprint(f\"Structures: {stats['structures']}\")\nprint(f\"Materials: {stats['materials']}\")\n</code></pre> <p>Saves filtered IFC elements to Neo4j database using batch operations.</p> <p>Parameters:</p> Name Type Description Default <code>filtered_elements</code> <code>dict</code> <p>Dictionary of element type -&gt; elements list</p> required <code>ifc_file</code> <code>Any</code> <p>Loaded IFC file object</p> required <code>uri</code> <code>str</code> <p>Neo4j connection URI</p> required <code>username</code> <code>str</code> <p>Neo4j username</p> required <code>password</code> <code>str</code> <p>Neo4j password</p> required <code>clear_db</code> <code>bool</code> <p>Whether to clear the database before import (default: False)</p> <code>False</code> <code>config</code> <code>Optional[dict]</code> <p>Extraction configuration</p> <code>None</code> <p>Returns:</p> Type Description <code>dict</code> <p>Dictionary with import statistics</p> <p>Raises:</p> Type Description <code>DatabaseConnectionError</code> <p>If connection fails</p> <code>DatabaseOperationError</code> <p>If database operations fail</p> Source code in <code>src/ifc_graph/neo4j_store.py</code> <pre><code>def save_to_neo4j(\n    filtered_elements: dict,\n    ifc_file: Any,\n    uri: str,\n    username: str,\n    password: str,\n    clear_db: bool = False,\n    config: Optional[dict] = None\n) -&gt; dict:\n    \"\"\"\n    Saves filtered IFC elements to Neo4j database using batch operations.\n\n    Args:\n        filtered_elements: Dictionary of element type -&gt; elements list\n        ifc_file: Loaded IFC file object\n        uri: Neo4j connection URI\n        username: Neo4j username\n        password: Neo4j password\n        clear_db: Whether to clear the database before import (default: False)\n        config: Extraction configuration\n\n    Returns:\n        Dictionary with import statistics\n\n    Raises:\n        DatabaseConnectionError: If connection fails\n        DatabaseOperationError: If database operations fail\n    \"\"\"\n    if config is None:\n        config = {\n            'include_materials': True,\n            'include_property_sets': True,\n            'max_properties_per_element': 50,\n        }\n\n    start_time = time.time()\n    stats = {\n        'elements': 0,\n        'structures': 0,\n        'materials': 0,\n        'property_sets': 0,\n    }\n\n    try:\n        with Neo4jConnection(uri, username, password) as conn:\n            with conn.session() as session:\n                # Optionally clear database\n                if clear_db:\n                    clear_database(session)\n\n                # Create project node\n                project = ifc_file.by_type(\"IfcProject\")[0]\n                project_id = create_project_node(session, project)\n\n                # Process all elements\n                all_spatial_info = []\n                all_materials = []\n                all_element_ids = []\n\n                for element_type, elements in filtered_elements.items():\n                    logger.info(f\"Processing {len(elements)} {element_type} elements...\")\n\n                    count, spatial, materials, psets = batch_create_elements(\n                        session, elements, config\n                    )\n\n                    stats['elements'] += count\n                    all_spatial_info.extend(spatial)\n                    all_materials.extend(materials)\n\n                    # Collect element IDs for project relationships\n                    for elem in elements:\n                        all_element_ids.append(str(elem.id()))\n\n                # Create relationships\n                batch_create_project_relationships(session, project_id, all_element_ids)\n\n                # Create structures and their relationships\n                stats['structures'] = batch_create_structures(session, all_spatial_info)\n                batch_create_structure_relationships(session, all_spatial_info)\n\n                # Create materials\n                stats['materials'] = batch_create_materials(session, all_materials)\n\n                # Create metadata\n                duration = time.time() - start_time\n                create_metadata(session, {\n                    'timestamp': time.strftime(\"%Y-%m-%d %H:%M:%S\"),\n                    'element_count': stats['elements'],\n                    'types': \", \".join(filtered_elements.keys()),\n                    'ifc_file': str(ifc_file.header.file_name.name if hasattr(ifc_file, 'header') else 'Unknown'),\n                    'duration': round(duration, 2),\n                })\n\n        save_time = time.time() - start_time\n        logger.info(f\"Saved {stats['elements']} elements to Neo4j in {save_time:.2f} seconds\")\n\n        return stats\n\n    except DatabaseConnectionError:\n        raise\n    except Neo4jError as e:\n        raise DatabaseOperationError(f\"Database operation failed: {e}\") from e\n    except Exception as e:\n        raise DatabaseOperationError(f\"Unexpected error during save: {e}\") from e\n</code></pre>"},{"location":"api/neo4j-store/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>filtered_elements</code> dict - Dictionary from <code>filter_physical_elements()</code> <code>ifc_file</code> ifcopenshell.file - Loaded IFC file object <code>uri</code> str - Neo4j connection URI <code>username</code> str - Neo4j username <code>password</code> str - Neo4j password <code>clear_db</code> bool <code>False</code> Clear database before import <code>config</code> dict None Extraction configuration"},{"location":"api/neo4j-store/#return-value","title":"Return Value","text":"<p>Returns a dictionary with import statistics:</p> <pre><code>{\n    'elements': 150,      # Element nodes created\n    'structures': 12,     # Structure nodes created\n    'materials': 45,      # Material relationships created\n    'property_sets': 0,   # Reserved for future use\n}\n</code></pre>"},{"location":"api/neo4j-store/#internal-functions","title":"Internal Functions","text":"<p>These functions are used internally by <code>save_to_neo4j()</code> but can be used directly for custom workflows.</p>"},{"location":"api/neo4j-store/#clear_database","title":"clear_database","text":"<p>Clear all nodes and relationships from the database.</p> <pre><code>from ifc_graph.neo4j_store import clear_database\n\nwith Neo4jConnection(uri, user, password) as conn:\n    with conn.session() as session:\n        clear_database(session)\n</code></pre> <p>Warning</p> <p>This will delete all data in the database.</p>"},{"location":"api/neo4j-store/#create_project_node","title":"create_project_node","text":"<p>Create the IFC project node.</p> <pre><code>from ifc_graph.neo4j_store import create_project_node\n\nwith conn.session() as session:\n    project = ifc_file.by_type(\"IfcProject\")[0]\n    project_id = create_project_node(session, project)\n</code></pre>"},{"location":"api/neo4j-store/#batch_create_elements","title":"batch_create_elements","text":"<p>Create element nodes in batches for performance.</p> <pre><code>from ifc_graph.neo4j_store import batch_create_elements\n\nwith conn.session() as session:\n    count, spatial, materials, psets = batch_create_elements(\n        session,\n        elements=wall_elements,\n        config={'include_materials': True},\n        batch_size=500\n    )\n</code></pre>"},{"location":"api/neo4j-store/#batch_create_structures","title":"batch_create_structures","text":"<p>Create structure nodes (storeys, buildings, etc.).</p> <pre><code>from ifc_graph.neo4j_store import batch_create_structures\n\nwith conn.session() as session:\n    count = batch_create_structures(session, spatial_info, batch_size=500)\n</code></pre>"},{"location":"api/neo4j-store/#batch_create_materials","title":"batch_create_materials","text":"<p>Create material nodes and HAS_MATERIAL relationships.</p> <pre><code>from ifc_graph.neo4j_store import batch_create_materials\n\nwith conn.session() as session:\n    count = batch_create_materials(session, materials, batch_size=500)\n</code></pre>"},{"location":"api/neo4j-store/#create_metadata","title":"create_metadata","text":"<p>Create import metadata node.</p> <pre><code>from ifc_graph.neo4j_store import create_metadata\n\nwith conn.session() as session:\n    create_metadata(session, {\n        'timestamp': '2024-01-15 10:30:00',\n        'element_count': 150,\n        'types': 'IfcWall, IfcDoor, IfcWindow',\n        'ifc_file': 'building.ifc',\n        'duration': 2.5,\n    })\n</code></pre>"},{"location":"api/neo4j-store/#configuration-options","title":"Configuration Options","text":"<p>The <code>config</code> parameter accepts:</p> Option Type Default Description <code>include_materials</code> bool <code>True</code> Create material nodes and relationships <code>include_property_sets</code> bool <code>True</code> Extract and store property sets <code>max_properties_per_element</code> int <code>50</code> Maximum properties per element"},{"location":"api/neo4j-store/#example-custom-database-operations","title":"Example: Custom Database Operations","text":"<pre><code>from ifc_graph import (\n    Neo4jConnection,\n    filter_physical_elements,\n)\nfrom ifc_graph.neo4j_store import (\n    clear_database,\n    create_project_node,\n    batch_create_elements,\n    batch_create_structures,\n    batch_create_materials,\n)\n\n# Load IFC\nelements, ifc_file = filter_physical_elements(\"model.ifc\")\n\n# Custom database operations\nwith Neo4jConnection(uri, user, password) as conn:\n    with conn.session() as session:\n        # Clear existing data\n        clear_database(session)\n\n        # Create project\n        project = ifc_file.by_type(\"IfcProject\")[0]\n        project_id = create_project_node(session, project)\n\n        # Process elements type by type\n        for elem_type, elems in elements.items():\n            print(f\"Processing {len(elems)} {elem_type}...\")\n\n            count, spatial, materials, psets = batch_create_elements(\n                session, elems, config={}, batch_size=100\n            )\n\n            batch_create_structures(session, spatial)\n            batch_create_materials(session, materials)\n\n        print(\"Done!\")\n</code></pre>"},{"location":"api/neo4j-store/#see-also","title":"See Also","text":"<ul> <li>Element Filter API - IFC extraction</li> <li>Query Loader API - Cypher query management</li> <li>Graph Model - Database schema</li> </ul>"},{"location":"api/query-loader/","title":"Query Loader API","text":"<p>The <code>query_loader</code> module manages Cypher query files for cleaner code organization.</p>"},{"location":"api/query-loader/#overview","title":"Overview","text":"<p>Instead of embedding Cypher queries in Python code, the library stores queries in <code>.cypher</code> files within the <code>cypher_queries</code> directory. The query loader provides a simple interface to load and cache these queries.</p>"},{"location":"api/query-loader/#classes","title":"Classes","text":""},{"location":"api/query-loader/#queryloader","title":"QueryLoader","text":"<p>Class-based interface for loading Cypher queries with caching support.</p> <pre><code>from ifc_graph import QueryLoader\n\n# Create loader\nloader = QueryLoader(use_cache=True)\n\n# List available queries\nqueries = loader.list_queries()\nprint(queries)  # ['clear_database', 'create_elements_batch', ...]\n\n# Load a query\nquery = loader.load(\"create_elements_batch\")\nprint(query)\n</code></pre> <p>Class-based interface for loading Cypher queries.</p> <p>Provides an alternative to the module-level functions for object-oriented usage patterns.</p> Source code in <code>src/ifc_graph/query_loader.py</code> <pre><code>class QueryLoader:\n    \"\"\"\n    Class-based interface for loading Cypher queries.\n\n    Provides an alternative to the module-level functions for\n    object-oriented usage patterns.\n    \"\"\"\n\n    def __init__(self, queries_dir: Optional[Path] = None, use_cache: bool = True):\n        \"\"\"\n        Initialize the query loader.\n\n        Args:\n            queries_dir: Optional custom queries directory\n            use_cache: Whether to cache loaded queries\n        \"\"\"\n        self._queries_dir = queries_dir or get_queries_directory()\n        self._use_cache = use_cache\n        self._cache: dict[str, str] = {}\n\n    @property\n    def queries_dir(self) -&gt; Path:\n        \"\"\"Get the queries directory.\"\"\"\n        return self._queries_dir\n\n    def load(self, query_name: str) -&gt; str:\n        \"\"\"\n        Load a query by name.\n\n        Args:\n            query_name: Name of the query file (without .cypher extension)\n\n        Returns:\n            The Cypher query string\n        \"\"\"\n        if self._use_cache and query_name in self._cache:\n            return self._cache[query_name]\n\n        query_path = self._queries_dir / f\"{query_name}.cypher\"\n\n        if not query_path.exists():\n            raise FileNotFoundError(f\"Query file not found: {query_path}\")\n\n        query = query_path.read_text(encoding='utf-8')\n\n        if self._use_cache:\n            self._cache[query_name] = query\n\n        return query\n\n    def list_queries(self) -&gt; list[str]:\n        \"\"\"List all available query names.\"\"\"\n        if not self._queries_dir.exists():\n            return []\n        return [f.stem for f in self._queries_dir.glob(\"*.cypher\")]\n\n    def clear_cache(self) -&gt; None:\n        \"\"\"Clear the query cache.\"\"\"\n        self._cache.clear()\n</code></pre>"},{"location":"api/query-loader/#ifc_graph.query_loader.QueryLoader.queries_dir","title":"<code>queries_dir</code>  <code>property</code>","text":"<p>Get the queries directory.</p>"},{"location":"api/query-loader/#ifc_graph.query_loader.QueryLoader.__init__","title":"<code>__init__(queries_dir=None, use_cache=True)</code>","text":"<p>Initialize the query loader.</p> <p>Parameters:</p> Name Type Description Default <code>queries_dir</code> <code>Optional[Path]</code> <p>Optional custom queries directory</p> <code>None</code> <code>use_cache</code> <code>bool</code> <p>Whether to cache loaded queries</p> <code>True</code> Source code in <code>src/ifc_graph/query_loader.py</code> <pre><code>def __init__(self, queries_dir: Optional[Path] = None, use_cache: bool = True):\n    \"\"\"\n    Initialize the query loader.\n\n    Args:\n        queries_dir: Optional custom queries directory\n        use_cache: Whether to cache loaded queries\n    \"\"\"\n    self._queries_dir = queries_dir or get_queries_directory()\n    self._use_cache = use_cache\n    self._cache: dict[str, str] = {}\n</code></pre>"},{"location":"api/query-loader/#ifc_graph.query_loader.QueryLoader.clear_cache","title":"<code>clear_cache()</code>","text":"<p>Clear the query cache.</p> Source code in <code>src/ifc_graph/query_loader.py</code> <pre><code>def clear_cache(self) -&gt; None:\n    \"\"\"Clear the query cache.\"\"\"\n    self._cache.clear()\n</code></pre>"},{"location":"api/query-loader/#ifc_graph.query_loader.QueryLoader.list_queries","title":"<code>list_queries()</code>","text":"<p>List all available query names.</p> Source code in <code>src/ifc_graph/query_loader.py</code> <pre><code>def list_queries(self) -&gt; list[str]:\n    \"\"\"List all available query names.\"\"\"\n    if not self._queries_dir.exists():\n        return []\n    return [f.stem for f in self._queries_dir.glob(\"*.cypher\")]\n</code></pre>"},{"location":"api/query-loader/#ifc_graph.query_loader.QueryLoader.load","title":"<code>load(query_name)</code>","text":"<p>Load a query by name.</p> <p>Parameters:</p> Name Type Description Default <code>query_name</code> <code>str</code> <p>Name of the query file (without .cypher extension)</p> required <p>Returns:</p> Type Description <code>str</code> <p>The Cypher query string</p> Source code in <code>src/ifc_graph/query_loader.py</code> <pre><code>def load(self, query_name: str) -&gt; str:\n    \"\"\"\n    Load a query by name.\n\n    Args:\n        query_name: Name of the query file (without .cypher extension)\n\n    Returns:\n        The Cypher query string\n    \"\"\"\n    if self._use_cache and query_name in self._cache:\n        return self._cache[query_name]\n\n    query_path = self._queries_dir / f\"{query_name}.cypher\"\n\n    if not query_path.exists():\n        raise FileNotFoundError(f\"Query file not found: {query_path}\")\n\n    query = query_path.read_text(encoding='utf-8')\n\n    if self._use_cache:\n        self._cache[query_name] = query\n\n    return query\n</code></pre>"},{"location":"api/query-loader/#constructor-parameters","title":"Constructor Parameters","text":"Parameter Type Default Description <code>queries_dir</code> Path None Custom queries directory (default: package directory) <code>use_cache</code> bool <code>True</code> Whether to cache loaded queries"},{"location":"api/query-loader/#methods","title":"Methods","text":""},{"location":"api/query-loader/#loadquery_name","title":"load(query_name)","text":"<p>Load a query by name.</p> <pre><code>loader = QueryLoader()\nquery = loader.load(\"create_elements_batch\")\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>query_name</code> str Name of query file (without .cypher extension) <p>Returns: The Cypher query string</p> <p>Raises: <code>FileNotFoundError</code> if query file doesn't exist</p>"},{"location":"api/query-loader/#list_queries","title":"list_queries()","text":"<p>List all available query names.</p> <pre><code>loader = QueryLoader()\navailable = loader.list_queries()\n# ['clear_database', 'create_elements_batch', 'create_materials_batch', ...]\n</code></pre> <p>Returns: List of query names (without .cypher extension)</p>"},{"location":"api/query-loader/#clear_cache","title":"clear_cache()","text":"<p>Clear the query cache.</p> <pre><code>loader = QueryLoader(use_cache=True)\nloader.load(\"create_elements_batch\")  # Loads from file\nloader.load(\"create_elements_batch\")  # Uses cache\nloader.clear_cache()\nloader.load(\"create_elements_batch\")  # Loads from file again\n</code></pre>"},{"location":"api/query-loader/#properties","title":"Properties","text":""},{"location":"api/query-loader/#queries_dir","title":"queries_dir","text":"<p>Get the queries directory path.</p> <pre><code>loader = QueryLoader()\nprint(loader.queries_dir)\n# /path/to/site-packages/ifc_graph/cypher_queries\n</code></pre>"},{"location":"api/query-loader/#functions","title":"Functions","text":""},{"location":"api/query-loader/#load_query","title":"load_query","text":"<p>Module-level function to load a Cypher query.</p> <pre><code>from ifc_graph import load_query\n\nquery = load_query(\"create_elements_batch\")\nprint(query)\n</code></pre> <p>Load a Cypher query from a .cypher file.</p> <p>Parameters:</p> Name Type Description Default <code>query_name</code> <code>str</code> <p>Name of the query file (without .cypher extension)</p> required <code>use_cache</code> <code>bool</code> <p>Whether to use cached queries (default: True)</p> <code>True</code> <p>Returns:</p> Type Description <code>str</code> <p>The Cypher query string</p> <p>Raises:</p> Type Description <code>FileNotFoundError</code> <p>If the query file doesn't exist</p> <code>IOError</code> <p>If there's an error reading the file</p> Source code in <code>src/ifc_graph/query_loader.py</code> <pre><code>def load_query(query_name: str, use_cache: bool = True) -&gt; str:\n    \"\"\"\n    Load a Cypher query from a .cypher file.\n\n    Args:\n        query_name: Name of the query file (without .cypher extension)\n        use_cache: Whether to use cached queries (default: True)\n\n    Returns:\n        The Cypher query string\n\n    Raises:\n        FileNotFoundError: If the query file doesn't exist\n        IOError: If there's an error reading the file\n    \"\"\"\n    if use_cache and query_name in _query_cache:\n        logger.debug(f\"Using cached query: {query_name}\")\n        return _query_cache[query_name]\n\n    query_path = get_queries_directory() / f\"{query_name}.cypher\"\n\n    if not query_path.exists():\n        raise FileNotFoundError(f\"Query file not found: {query_path}\")\n\n    try:\n        query = query_path.read_text(encoding='utf-8')\n\n        # Cache the query\n        if use_cache:\n            _query_cache[query_name] = query\n\n        logger.debug(f\"Loaded query from file: {query_name}\")\n        return query\n\n    except IOError as e:\n        logger.error(f\"Error reading query file {query_path}: {e}\")\n        raise\n</code></pre>"},{"location":"api/query-loader/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>query_name</code> str - Name of query file (without .cypher extension) <code>use_cache</code> bool <code>True</code> Whether to use cached queries"},{"location":"api/query-loader/#returns","title":"Returns","text":"<p>The Cypher query string.</p>"},{"location":"api/query-loader/#raises","title":"Raises","text":"<ul> <li><code>FileNotFoundError</code>: If query file doesn't exist</li> <li><code>IOError</code>: If there's an error reading the file</li> </ul>"},{"location":"api/query-loader/#list_available_queries","title":"list_available_queries","text":"<p>List all available query files.</p> <pre><code>from ifc_graph.query_loader import list_available_queries\n\nqueries = list_available_queries()\nprint(queries)\n</code></pre> <p>List all available query files.</p> <p>Returns:</p> Type Description <code>list[str]</code> <p>List of query names (without .cypher extension)</p> Source code in <code>src/ifc_graph/query_loader.py</code> <pre><code>def list_available_queries() -&gt; list[str]:\n    \"\"\"\n    List all available query files.\n\n    Returns:\n        List of query names (without .cypher extension)\n    \"\"\"\n    queries_dir = get_queries_directory()\n\n    if not queries_dir.exists():\n        return []\n\n    return [f.stem for f in queries_dir.glob(\"*.cypher\")]\n</code></pre>"},{"location":"api/query-loader/#validate_queries","title":"validate_queries","text":"<p>Validate that all query files exist and are readable.</p> <pre><code>from ifc_graph.query_loader import validate_queries\n\nresults = validate_queries()\nfor name, valid in results.items():\n    status = \"OK\" if valid else \"FAILED\"\n    print(f\"{name}: {status}\")\n</code></pre> <p>Validate that all query files exist and are readable.</p> <p>Returns:</p> Type Description <code>dict[str, bool]</code> <p>Dictionary mapping query names to their validity status</p> Source code in <code>src/ifc_graph/query_loader.py</code> <pre><code>def validate_queries() -&gt; dict[str, bool]:\n    \"\"\"\n    Validate that all query files exist and are readable.\n\n    Returns:\n        Dictionary mapping query names to their validity status\n    \"\"\"\n    results = {}\n\n    for query_name in list_available_queries():\n        try:\n            load_query(query_name, use_cache=False)\n            results[query_name] = True\n        except Exception as e:\n            logger.warning(f\"Invalid query {query_name}: {e}\")\n            results[query_name] = False\n\n    return results\n</code></pre>"},{"location":"api/query-loader/#clear_cache_1","title":"clear_cache","text":"<p>Clear the module-level query cache.</p> <pre><code>from ifc_graph.query_loader import clear_cache\n\nclear_cache()\n</code></pre> <p>Clear the query cache.</p> Source code in <code>src/ifc_graph/query_loader.py</code> <pre><code>def clear_cache() -&gt; None:\n    \"\"\"Clear the query cache.\"\"\"\n    _query_cache.clear()\n    logger.debug(\"Query cache cleared\")\n</code></pre>"},{"location":"api/query-loader/#get_queries_directory","title":"get_queries_directory","text":"<p>Get the path to the cypher_queries directory.</p> <pre><code>from ifc_graph.query_loader import get_queries_directory\n\nqueries_dir = get_queries_directory()\nprint(queries_dir)\n</code></pre> <p>Get the path to the cypher_queries directory within the package.</p> Source code in <code>src/ifc_graph/query_loader.py</code> <pre><code>def get_queries_directory() -&gt; Path:\n    \"\"\"Get the path to the cypher_queries directory within the package.\"\"\"\n    return Path(__file__).parent / \"cypher_queries\"\n</code></pre>"},{"location":"api/query-loader/#available-queries","title":"Available Queries","text":"<p>The package includes these pre-defined queries:</p> Query Name Description <code>clear_database</code> Delete all nodes and relationships <code>create_project</code> Create the IFC project node <code>create_elements_batch</code> Batch create element nodes <code>create_structures_batch</code> Batch create structure nodes <code>create_materials_batch</code> Batch create materials and relationships <code>create_project_contains</code> Link project to elements <code>create_structure_contains</code> Link structures to elements <code>create_relationships_batch</code> Create element relationships <code>create_property_sets_batch</code> Batch create property sets <code>create_metadata</code> Create import metadata node"},{"location":"api/query-loader/#query-file-format","title":"Query File Format","text":"<p>Query files are plain text files with the <code>.cypher</code> extension containing valid Cypher queries.</p> <p>Example: <code>create_elements_batch.cypher</code></p> <pre><code>// Batch create Element nodes from a list of elements\n// Parameters: $elements - list of element objects with properties\nUNWIND $elements AS elem\nCREATE (e:Element {\n    id: elem.id,\n    name: elem.name,\n    guid: elem.guid,\n    type: elem.type,\n    object_type: elem.object_type,\n    description: elem.description,\n    tag: elem.tag\n})\nRETURN count(e) AS created_count\n</code></pre>"},{"location":"api/query-loader/#custom-query-directory","title":"Custom Query Directory","text":"<p>You can use a custom directory for your own queries:</p> <pre><code>from pathlib import Path\nfrom ifc_graph import QueryLoader\n\n# Use custom queries directory\nmy_queries = Path(\"/path/to/my/queries\")\nloader = QueryLoader(queries_dir=my_queries)\n\n# Load custom query\nquery = loader.load(\"my_custom_query\")\n</code></pre>"},{"location":"api/query-loader/#example-using-queries-with-neo4j","title":"Example: Using Queries with Neo4j","text":"<pre><code>from ifc_graph import load_query, Neo4jConnection\n\n# Load a query\nquery = load_query(\"create_elements_batch\")\n\n# Execute with Neo4j\nwith Neo4jConnection(uri, user, password) as conn:\n    with conn.session() as session:\n        elements = [\n            {'id': '1', 'name': 'Wall 1', 'guid': 'abc', 'type': 'IfcWall', ...},\n            {'id': '2', 'name': 'Wall 2', 'guid': 'def', 'type': 'IfcWall', ...},\n        ]\n        result = session.run(query, elements=elements)\n        count = result.single()['created_count']\n        print(f\"Created {count} elements\")\n</code></pre>"},{"location":"api/query-loader/#caching-behavior","title":"Caching Behavior","text":"<p>The query loader uses caching to avoid reading files repeatedly:</p> <pre><code>from ifc_graph import load_query\n\n# First call reads from file\nquery1 = load_query(\"create_elements_batch\", use_cache=True)\n\n# Second call uses cache (faster)\nquery2 = load_query(\"create_elements_batch\", use_cache=True)\n\n# Force file read\nquery3 = load_query(\"create_elements_batch\", use_cache=False)\n</code></pre> <p>To clear the cache:</p> <pre><code>from ifc_graph.query_loader import clear_cache\n\nclear_cache()\n</code></pre>"},{"location":"api/query-loader/#see-also","title":"See Also","text":"<ul> <li>Element Filter API - IFC extraction</li> <li>Neo4j Store API - Database operations</li> <li>Graph Model - Database schema</li> </ul>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p><code>ifc-graph</code> can be configured through environment variables, configuration files, and CLI arguments.</p>"},{"location":"getting-started/configuration/#environment-variables","title":"Environment Variables","text":"<p>Create a <code>.env</code> file in your project root:</p> <pre><code># Neo4j Connection\nNEO4J_URI=bolt://localhost:7687\nNEO4J_USER=neo4j\nNEO4J_PASSWORD=your_password_here\n\n# Default IFC file path\nIFC_FILE_PATH=./model.ifc\n</code></pre>"},{"location":"getting-started/configuration/#available-environment-variables","title":"Available Environment Variables","text":"Variable Description Default <code>NEO4J_URI</code> Neo4j connection URI <code>bolt://localhost:7687</code> <code>NEO4J_USER</code> Neo4j username <code>neo4j</code> <code>NEO4J_PASSWORD</code> Neo4j password (required) <code>IFC_FILE_PATH</code> Default IFC file path (none)"},{"location":"getting-started/configuration/#configuration-file","title":"Configuration File","text":"<p>Create a <code>config.yaml</code> file to customize extraction settings:</p> <pre><code># Element types to extract from IFC files\nelement_types:\n  - IfcWall\n  - IfcWallStandardCase\n  - IfcDoor\n  - IfcWindow\n  - IfcColumn\n  - IfcBeam\n  - IfcSlab\n  - IfcStair\n  - IfcRamp\n  - IfcRoof\n  - IfcCurtainWall\n  - IfcPlate\n  - IfcMember\n  - IfcRailing\n  - IfcFurniture\n  - IfcBuildingElementProxy\n\n# Extraction options\nextraction:\n  include_property_sets: true\n  include_materials: true\n  max_properties_per_element: 50\n</code></pre>"},{"location":"getting-started/configuration/#supported-element-types","title":"Supported Element Types","text":"<p><code>ifc-graph</code> can extract any IFC element type. Common types include:</p>"},{"location":"getting-started/configuration/#structural-elements","title":"Structural Elements","text":"<ul> <li><code>IfcWall</code>, <code>IfcWallStandardCase</code></li> <li><code>IfcColumn</code></li> <li><code>IfcBeam</code></li> <li><code>IfcSlab</code></li> <li><code>IfcFooting</code></li> <li><code>IfcPile</code></li> </ul>"},{"location":"getting-started/configuration/#architectural-elements","title":"Architectural Elements","text":"<ul> <li><code>IfcDoor</code></li> <li><code>IfcWindow</code></li> <li><code>IfcStair</code>, <code>IfcStairFlight</code></li> <li><code>IfcRamp</code>, <code>IfcRampFlight</code></li> <li><code>IfcRoof</code></li> <li><code>IfcCurtainWall</code></li> <li><code>IfcRailing</code></li> </ul>"},{"location":"getting-started/configuration/#mep-elements","title":"MEP Elements","text":"<ul> <li><code>IfcFlowTerminal</code></li> <li><code>IfcFlowSegment</code></li> <li><code>IfcFlowFitting</code></li> <li><code>IfcDistributionElement</code></li> </ul>"},{"location":"getting-started/configuration/#furniture-equipment","title":"Furniture &amp; Equipment","text":"<ul> <li><code>IfcFurniture</code></li> <li><code>IfcFurnishingElement</code></li> <li><code>IfcBuildingElementProxy</code></li> </ul>"},{"location":"getting-started/configuration/#extraction-options","title":"Extraction Options","text":"Option Type Description <code>include_property_sets</code> boolean Extract property sets for each element <code>include_materials</code> boolean Extract material information <code>max_properties_per_element</code> integer Limit properties per element (performance)"},{"location":"getting-started/configuration/#cli-arguments","title":"CLI Arguments","text":"<p>CLI arguments override environment variables and config file settings:</p> <pre><code>ifc-graph \\\n  --ifc-file model.ifc \\\n  --config custom_config.yaml \\\n  --neo4j-uri bolt://production:7687 \\\n  --neo4j-user admin \\\n  --neo4j-password secret \\\n  --clear-db \\\n  --log-level DEBUG\n</code></pre>"},{"location":"getting-started/configuration/#configuration-priority","title":"Configuration Priority","text":"<p>Settings are applied in this order (later overrides earlier):</p> <ol> <li>Default values - Built-in defaults</li> <li>Environment variables - From <code>.env</code> file</li> <li>Configuration file - From <code>config.yaml</code></li> <li>CLI arguments - Command-line options</li> </ol>"},{"location":"getting-started/configuration/#example-configurations","title":"Example Configurations","text":""},{"location":"getting-started/configuration/#minimal-configuration-structural-only","title":"Minimal Configuration (Structural Only)","text":"<pre><code>element_types:\n  - IfcWall\n  - IfcColumn\n  - IfcBeam\n  - IfcSlab\n  - IfcFooting\n</code></pre>"},{"location":"getting-started/configuration/#full-building-model","title":"Full Building Model","text":"<pre><code>element_types:\n  # Structural\n  - IfcWall\n  - IfcWallStandardCase\n  - IfcColumn\n  - IfcBeam\n  - IfcSlab\n  - IfcFooting\n  - IfcPile\n  # Architectural\n  - IfcDoor\n  - IfcWindow\n  - IfcStair\n  - IfcStairFlight\n  - IfcRamp\n  - IfcRoof\n  - IfcCurtainWall\n  - IfcRailing\n  # Openings\n  - IfcOpeningElement\n  # Other\n  - IfcBuildingElementProxy\n\nextraction:\n  include_property_sets: true\n  include_materials: true\n  max_properties_per_element: 100\n</code></pre>"},{"location":"getting-started/configuration/#mep-focus","title":"MEP Focus","text":"<pre><code>element_types:\n  - IfcFlowTerminal\n  - IfcFlowSegment\n  - IfcFlowFitting\n  - IfcFlowController\n  - IfcDistributionElement\n  - IfcDistributionFlowElement\n  - IfcPipeSegment\n  - IfcPipeFitting\n  - IfcDuctSegment\n  - IfcDuctFitting\n  - IfcCableSegment\n</code></pre>"},{"location":"getting-started/configuration/#validating-configuration","title":"Validating Configuration","text":"<p>Use dry-run mode to validate your configuration without making database changes:</p> <pre><code>ifc-graph --ifc-file model.ifc --config config.yaml --dry-run\n</code></pre> <p>This will show which elements would be extracted with your current settings.</p>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<p>Before installing <code>ifc-graph</code>, ensure you have:</p> <ul> <li>Python 3.9 or higher</li> <li>Neo4j Database (version 4.x or 5.x)</li> <li>pip package manager</li> </ul>"},{"location":"getting-started/installation/#installing-from-pypi","title":"Installing from PyPI","text":"<p>The recommended way to install <code>ifc-graph</code> is via pip:</p> <pre><code>pip install ifc-graph\n</code></pre> <p>This will install the package along with all required dependencies:</p> <ul> <li><code>ifcopenshell</code> - For parsing IFC files</li> <li><code>neo4j</code> - Python driver for Neo4j database</li> <li><code>pyyaml</code> - For configuration file parsing</li> <li><code>python-dotenv</code> - For environment variable management</li> </ul>"},{"location":"getting-started/installation/#installing-from-source","title":"Installing from Source","text":"<p>If you want to install the latest development version or contribute to the project:</p> <pre><code># Clone the repository\ngit clone https://github.com/mugojames254/ifc-graph-database.git\ncd ifc-graph-database\n\n# Install in development mode\npip install -e .\n</code></pre>"},{"location":"getting-started/installation/#with-development-dependencies","title":"With Development Dependencies","text":"<p>For development work, install with dev dependencies:</p> <pre><code>pip install -e \".[dev]\"\n</code></pre> <p>This includes:</p> <ul> <li><code>pytest</code> - Testing framework</li> <li><code>pytest-cov</code> - Coverage reporting</li> <li><code>black</code> - Code formatter</li> <li><code>ruff</code> - Linter</li> <li><code>mypy</code> - Type checker</li> </ul>"},{"location":"getting-started/installation/#with-documentation-dependencies","title":"With Documentation Dependencies","text":"<p>To build the documentation locally:</p> <pre><code>pip install -e \".[docs]\"\n</code></pre>"},{"location":"getting-started/installation/#verifying-installation","title":"Verifying Installation","text":"<p>After installation, verify everything works:</p> <pre><code># Check the version\nifc-graph --version\n\n# View help\nifc-graph --help\n</code></pre> <p>You should see output similar to:</p> <pre><code>ifc-graph 0.1.1\n</code></pre>"},{"location":"getting-started/installation/#setting-up-neo4j","title":"Setting Up Neo4j","text":"<p><code>ifc-graph</code> requires a running Neo4j database. Here are your options:</p>"},{"location":"getting-started/installation/#option-1-neo4j-desktop-recommended-for-beginners","title":"Option 1: Neo4j Desktop (Recommended for beginners)","text":"<ol> <li>Download Neo4j Desktop</li> <li>Create a new project and database</li> <li>Start the database</li> <li>Note the connection URI (usually <code>bolt://localhost:7687</code>)</li> </ol>"},{"location":"getting-started/installation/#option-2-docker","title":"Option 2: Docker","text":"<pre><code>docker run -d \\\n  --name neo4j \\\n  -p 7474:7474 -p 7687:7687 \\\n  -e NEO4J_AUTH=neo4j/your_password \\\n  neo4j:latest\n</code></pre>"},{"location":"getting-started/installation/#option-3-neo4j-auradb-cloud","title":"Option 3: Neo4j AuraDB (Cloud)","text":"<ol> <li>Create a free account at Neo4j AuraDB</li> <li>Create a new database instance</li> <li>Note the connection URI and credentials</li> </ol>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Once installed, proceed to the Quick Start guide to process your first IFC file.</p>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>This guide will help you process your first IFC file and store it in Neo4j.</p>"},{"location":"getting-started/quickstart/#prerequisites","title":"Prerequisites","text":"<p>Before starting, ensure you have:</p> <ul> <li>[x] Installed <code>ifc-graph</code> (Installation Guide)</li> <li>[x] A running Neo4j database</li> <li>[x] An IFC file to process</li> </ul>"},{"location":"getting-started/quickstart/#step-1-configure-environment","title":"Step 1: Configure Environment","text":"<p>Create a <code>.env</code> file in your working directory:</p> <pre><code># Copy from example if available\ncp .env.example .env\n</code></pre> <p>Edit the <code>.env</code> file with your Neo4j credentials:</p> <pre><code>NEO4J_URI=bolt://localhost:7687\nNEO4J_USER=neo4j\nNEO4J_PASSWORD=your_password_here\nIFC_FILE_PATH=./your_model.ifc\n</code></pre> <p>Environment Variables</p> <p>You can also pass credentials directly via CLI arguments or programmatically. The <code>.env</code> file is just one option.</p>"},{"location":"getting-started/quickstart/#step-2-process-an-ifc-file","title":"Step 2: Process an IFC File","text":""},{"location":"getting-started/quickstart/#using-the-cli","title":"Using the CLI","text":"<p>The simplest way to process an IFC file:</p> <pre><code>ifc-graph --ifc-file path/to/your_model.ifc\n</code></pre> <p>You should see output like:</p> <pre><code>2024-01-15 10:30:45 INFO Loading IFC file: path/to/your_model.ifc\n2024-01-15 10:30:46 INFO Found 150 elements matching filter criteria\n2024-01-15 10:30:47 INFO Connected to Neo4j at bolt://localhost:7687\n2024-01-15 10:30:48 INFO Created 150 elements\n2024-01-15 10:30:48 INFO Created 12 spatial structures\n2024-01-15 10:30:48 INFO Linked 45 materials\n2024-01-15 10:30:48 INFO Processing complete!\n</code></pre>"},{"location":"getting-started/quickstart/#using-python","title":"Using Python","text":"<pre><code>from ifc_graph import filter_physical_elements, save_to_neo4j\n\n# Extract elements from your IFC file\nelements, ifc_file = filter_physical_elements(\n    \"path/to/your_model.ifc\",\n    element_types=['IfcWall', 'IfcDoor', 'IfcWindow', 'IfcColumn']\n)\n\nprint(f\"Found {len(elements)} elements\")\n\n# Store in Neo4j\nstats = save_to_neo4j(\n    elements,\n    ifc_file,\n    uri=\"bolt://localhost:7687\",\n    username=\"neo4j\",\n    password=\"your_password\"\n)\n\nprint(f\"Created {stats['elements']} element nodes\")\nprint(f\"Created {stats['structures']} structure nodes\")\nprint(f\"Linked {stats['materials']} materials\")\n</code></pre>"},{"location":"getting-started/quickstart/#step-3-view-in-neo4j-browser","title":"Step 3: View in Neo4j Browser","text":"<ol> <li>Open Neo4j Browser (usually at <code>http://localhost:7474</code>)</li> <li>Run a Cypher query to view your data:</li> </ol> <pre><code>// View all elements\nMATCH (e:Element) RETURN e LIMIT 25\n\n// View elements with their materials\nMATCH (e:Element)-[:HAS_MATERIAL]-&gt;(m:Material)\nRETURN e, m LIMIT 25\n\n// View the spatial structure\nMATCH (s:Structure)-[:CONTAINS]-&gt;(e:Element)\nRETURN s, e LIMIT 50\n</code></pre>"},{"location":"getting-started/quickstart/#step-4-preview-before-import-optional","title":"Step 4: Preview Before Import (Optional)","text":"<p>Use dry-run mode to see what would be imported without making changes:</p> <pre><code>ifc-graph --ifc-file model.ifc --dry-run\n</code></pre> <p>This shows element counts and types without modifying the database.</p>"},{"location":"getting-started/quickstart/#common-operations","title":"Common Operations","text":""},{"location":"getting-started/quickstart/#clear-database-before-import","title":"Clear Database Before Import","text":"<p>To replace existing data:</p> <pre><code>ifc-graph --ifc-file model.ifc --clear-db\n</code></pre> <p>Database Clearing</p> <p>The <code>--clear-db</code> flag will delete all existing nodes and relationships in the database before importing.</p>"},{"location":"getting-started/quickstart/#verbose-logging","title":"Verbose Logging","text":"<p>For debugging, enable debug logging:</p> <pre><code>ifc-graph --ifc-file model.ifc --log-level DEBUG\n</code></pre>"},{"location":"getting-started/quickstart/#custom-configuration","title":"Custom Configuration","text":"<p>Use a custom config file to specify which elements to extract:</p> <pre><code>ifc-graph --config my_config.yaml --ifc-file model.ifc\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Guide - Customize element types and settings</li> <li>CLI Reference - Full CLI documentation</li> <li>Python API - Using as a Python library</li> <li>Graph Model - Understanding the Neo4j graph structure</li> </ul>"},{"location":"user-guide/cli/","title":"CLI Usage","text":"<p>The <code>ifc-graph</code> command-line interface provides a convenient way to process IFC files and store them in Neo4j without writing any Python code.</p>"},{"location":"user-guide/cli/#basic-usage","title":"Basic Usage","text":"<pre><code>ifc-graph --ifc-file path/to/model.ifc\n</code></pre> <p>This command will:</p> <ol> <li>Load the IFC file</li> <li>Extract building elements based on default or configured types</li> <li>Connect to Neo4j using credentials from environment variables</li> <li>Store the elements as a graph in the database</li> </ol>"},{"location":"user-guide/cli/#command-reference","title":"Command Reference","text":""},{"location":"user-guide/cli/#synopsis","title":"Synopsis","text":"<pre><code>ifc-graph [OPTIONS]\n</code></pre>"},{"location":"user-guide/cli/#options","title":"Options","text":"Option Description Default <code>--ifc-file PATH</code> Path to the IFC file to process <code>IFC_FILE_PATH</code> env var <code>--config PATH</code> Path to YAML configuration file <code>config.yaml</code> <code>--neo4j-uri URI</code> Neo4j connection URI <code>NEO4J_URI</code> env var <code>--neo4j-user USER</code> Neo4j username <code>NEO4J_USER</code> env var <code>--neo4j-password PASS</code> Neo4j password <code>NEO4J_PASSWORD</code> env var <code>--clear-db</code> Clear database before import <code>false</code> <code>--dry-run</code> Preview import without database changes <code>false</code> <code>--log-level LEVEL</code> Logging level (DEBUG, INFO, WARNING, ERROR) <code>INFO</code> <code>--version</code> Show version and exit - <code>--help</code> Show help message and exit -"},{"location":"user-guide/cli/#examples","title":"Examples","text":""},{"location":"user-guide/cli/#process-a-single-ifc-file","title":"Process a Single IFC File","text":"<pre><code>ifc-graph --ifc-file building.ifc\n</code></pre>"},{"location":"user-guide/cli/#clear-database-before-import","title":"Clear Database Before Import","text":"<p>Data Loss</p> <p>The <code>--clear-db</code> flag will delete all existing nodes and relationships in your Neo4j database.</p> <pre><code>ifc-graph --ifc-file building.ifc --clear-db\n</code></pre>"},{"location":"user-guide/cli/#preview-import-dry-run","title":"Preview Import (Dry Run)","text":"<p>See what would be imported without making any database changes:</p> <pre><code>ifc-graph --ifc-file building.ifc --dry-run\n</code></pre> <p>Output:</p> <pre><code>=== DRY RUN - No database changes made ===\nIFC File: building.ifc\nTotal elements: 245\n\nElements by type:\n  IfcWall: 45\n  IfcDoor: 28\n  IfcWindow: 52\n  IfcColumn: 30\n  IfcBeam: 40\n  IfcSlab: 50\n</code></pre>"},{"location":"user-guide/cli/#use-custom-configuration","title":"Use Custom Configuration","text":"<pre><code>ifc-graph --ifc-file building.ifc --config my_config.yaml\n</code></pre>"},{"location":"user-guide/cli/#override-neo4j-connection","title":"Override Neo4j Connection","text":"<pre><code>ifc-graph \\\n  --ifc-file building.ifc \\\n  --neo4j-uri bolt://production-server:7687 \\\n  --neo4j-user admin \\\n  --neo4j-password secret123\n</code></pre>"},{"location":"user-guide/cli/#enable-debug-logging","title":"Enable Debug Logging","text":"<pre><code>ifc-graph --ifc-file building.ifc --log-level DEBUG\n</code></pre>"},{"location":"user-guide/cli/#environment-variables","title":"Environment Variables","text":"<p>The CLI reads connection settings from environment variables. Create a <code>.env</code> file in your working directory:</p> <pre><code># Neo4j Connection\nNEO4J_URI=bolt://localhost:7687\nNEO4J_USER=neo4j\nNEO4J_PASSWORD=your_password_here\n\n# Default IFC file path\nIFC_FILE_PATH=./model.ifc\n</code></pre>"},{"location":"user-guide/cli/#priority-order","title":"Priority Order","text":"<p>Settings are applied in this order (later overrides earlier):</p> <ol> <li>Default values - Built-in defaults</li> <li>Environment variables - From <code>.env</code> file</li> <li>Configuration file - From <code>config.yaml</code></li> <li>CLI arguments - Command-line options</li> </ol>"},{"location":"user-guide/cli/#configuration-file","title":"Configuration File","text":"<p>Create a <code>config.yaml</code> file to customize which element types to extract:</p> <pre><code># Element types to extract\nelement_types:\n  - IfcWall\n  - IfcWallStandardCase\n  - IfcDoor\n  - IfcWindow\n  - IfcColumn\n  - IfcBeam\n  - IfcSlab\n  - IfcStair\n  - IfcRoof\n\n# Extraction options\nextraction:\n  include_property_sets: true\n  include_materials: true\n  max_properties_per_element: 50\n\n# Logging settings\nlogging:\n  level: INFO\n</code></pre> <p>See the Configuration Guide for more details.</p>"},{"location":"user-guide/cli/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Success 1 Error (file not found, connection failed, etc.)"},{"location":"user-guide/cli/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/cli/#no-ifc-file-specified","title":"\"No IFC file specified\"","text":"<p>Either provide the <code>--ifc-file</code> argument or set <code>IFC_FILE_PATH</code> in your <code>.env</code> file:</p> <pre><code># Option 1: CLI argument\nifc-graph --ifc-file model.ifc\n\n# Option 2: Environment variable\nexport IFC_FILE_PATH=./model.ifc\nifc-graph\n</code></pre>"},{"location":"user-guide/cli/#missing-neo4j-connection-settings","title":"\"Missing Neo4j connection settings\"","text":"<p>Ensure all three Neo4j settings are provided via CLI arguments or environment variables:</p> <pre><code>export NEO4J_URI=bolt://localhost:7687\nexport NEO4J_USER=neo4j\nexport NEO4J_PASSWORD=your_password\n</code></pre>"},{"location":"user-guide/cli/#failed-to-connect-after-x-attempts","title":"\"Failed to connect after X attempts\"","text":"<ol> <li>Verify Neo4j is running: <code>docker ps</code> or check Neo4j Desktop</li> <li>Check the URI is correct (default: <code>bolt://localhost:7687</code>)</li> <li>Verify credentials are correct</li> <li>Check firewall settings if connecting to a remote server</li> </ol>"},{"location":"user-guide/cli/#authentication-failed","title":"\"Authentication failed\"","text":"<p>Double-check your username and password. The default Neo4j username is <code>neo4j</code>.</p>"},{"location":"user-guide/cli/#see-also","title":"See Also","text":"<ul> <li>Quick Start Guide</li> <li>Configuration Guide</li> <li>Python API</li> </ul>"},{"location":"user-guide/graph-model/","title":"Graph Model","text":"<p>This page describes the Neo4j graph structure created by <code>ifc-graph</code>. Understanding this model is essential for writing effective Cypher queries.</p>"},{"location":"user-guide/graph-model/#overview","title":"Overview","text":"<p>The graph model represents IFC building elements and their relationships in a property graph format suitable for Neo4j.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      CONTAINS       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Project   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502   Element   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                           \u2502\n                                           \u2502 HAS_MATERIAL\n                                           \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      CONTAINS       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Structure  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502   Material  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2502 (spatial hierarchy)\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Metadata   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/graph-model/#node-types","title":"Node Types","text":""},{"location":"user-guide/graph-model/#project","title":"Project","text":"<p>The root node representing the IFC project.</p> <p>Label: <code>Project</code></p> <p>Properties:</p> Property Type Description <code>id</code> String Unique IFC entity ID <code>name</code> String Project name <code>type</code> String Always \"IfcProject\" <code>description</code> String Project description <code>phase</code> String Project phase <p>Example Query:</p> <pre><code>MATCH (p:Project) RETURN p\n</code></pre>"},{"location":"user-guide/graph-model/#element","title":"Element","text":"<p>Building elements extracted from the IFC file (walls, doors, windows, etc.).</p> <p>Label: <code>Element</code></p> <p>Properties:</p> Property Type Description <code>id</code> String Unique IFC entity ID <code>name</code> String Element name <code>guid</code> String IFC GlobalId (UUID) <code>type</code> String IFC type (e.g., \"IfcWall\", \"IfcDoor\") <code>object_type</code> String Object type/family name <code>description</code> String Element description <code>tag</code> String Element tag/mark <p>Example Query:</p> <pre><code>// Find all walls\nMATCH (e:Element)\nWHERE e.type = 'IfcWall'\nRETURN e.name, e.guid\n</code></pre>"},{"location":"user-guide/graph-model/#structure","title":"Structure","text":"<p>Spatial structure elements (sites, buildings, storeys, spaces).</p> <p>Label: <code>Structure</code></p> <p>Properties:</p> Property Type Description <code>id</code> String Unique IFC entity ID <code>name</code> String Structure name <code>type</code> String IFC type (e.g., \"IfcBuildingStorey\") <code>long_name</code> String Long name/description <code>elevation</code> Float Elevation (for storeys) <p>Example Query:</p> <pre><code>// Find all storeys with their elevations\nMATCH (s:Structure)\nWHERE s.type = 'IfcBuildingStorey'\nRETURN s.name, s.elevation\nORDER BY s.elevation\n</code></pre>"},{"location":"user-guide/graph-model/#material","title":"Material","text":"<p>Materials associated with building elements.</p> <p>Label: <code>Material</code></p> <p>Properties:</p> Property Type Description <code>id</code> String Unique IFC material ID <code>name</code> String Material name <code>category</code> String Material category <p>Example Query:</p> <pre><code>// Find all unique materials\nMATCH (m:Material)\nRETURN DISTINCT m.name, m.category\n</code></pre>"},{"location":"user-guide/graph-model/#metadata","title":"Metadata","text":"<p>Import metadata node created for each import operation.</p> <p>Label: <code>Metadata</code></p> <p>Properties:</p> Property Type Description <code>timestamp</code> String Import timestamp <code>count</code> Integer Number of elements imported <code>types</code> String Comma-separated element types <code>ifc_file</code> String Source IFC filename <code>duration</code> Float Import duration in seconds <p>Example Query:</p> <pre><code>MATCH (m:Metadata)\nRETURN m.timestamp, m.count, m.duration\nORDER BY m.timestamp DESC\n</code></pre>"},{"location":"user-guide/graph-model/#relationships","title":"Relationships","text":""},{"location":"user-guide/graph-model/#contains-project-to-element","title":"CONTAINS (Project to Element)","text":"<p>Links the project to all building elements.</p> <pre><code>(:Project)-[:CONTAINS]-&gt;(:Element)\n</code></pre> <p>Example Query:</p> <pre><code>// Count elements in project\nMATCH (p:Project)-[:CONTAINS]-&gt;(e:Element)\nRETURN p.name, count(e) as element_count\n</code></pre>"},{"location":"user-guide/graph-model/#contains-structure-to-element","title":"CONTAINS (Structure to Element)","text":"<p>Links spatial structures to the elements they contain.</p> <pre><code>(:Structure)-[:CONTAINS]-&gt;(:Element)\n</code></pre> <p>Example Query:</p> <pre><code>// Find all elements on each storey\nMATCH (s:Structure)-[:CONTAINS]-&gt;(e:Element)\nWHERE s.type = 'IfcBuildingStorey'\nRETURN s.name, collect(e.name) as elements\n</code></pre>"},{"location":"user-guide/graph-model/#has_material","title":"HAS_MATERIAL","text":"<p>Links elements to their materials.</p> <pre><code>(:Element)-[:HAS_MATERIAL]-&gt;(:Material)\n</code></pre> <p>Example Query:</p> <pre><code>// Find elements with concrete materials\nMATCH (e:Element)-[:HAS_MATERIAL]-&gt;(m:Material)\nWHERE m.name CONTAINS 'Concrete'\nRETURN e.type, e.name, m.name\n</code></pre>"},{"location":"user-guide/graph-model/#common-query-patterns","title":"Common Query Patterns","text":""},{"location":"user-guide/graph-model/#count-elements-by-type","title":"Count Elements by Type","text":"<pre><code>MATCH (e:Element)\nRETURN e.type, count(e) as count\nORDER BY count DESC\n</code></pre>"},{"location":"user-guide/graph-model/#find-elements-on-a-specific-storey","title":"Find Elements on a Specific Storey","text":"<pre><code>MATCH (s:Structure {name: 'Level 1'})-[:CONTAINS]-&gt;(e:Element)\nRETURN e.type, e.name\n</code></pre>"},{"location":"user-guide/graph-model/#find-all-elements-using-a-material","title":"Find All Elements Using a Material","text":"<pre><code>MATCH (e:Element)-[:HAS_MATERIAL]-&gt;(m:Material {name: 'Concrete'})\nRETURN e.type, e.name\n</code></pre>"},{"location":"user-guide/graph-model/#get-building-hierarchy","title":"Get Building Hierarchy","text":"<pre><code>MATCH path = (p:Project)-[:CONTAINS]-&gt;(e:Element)&lt;-[:CONTAINS]-(s:Structure)\nRETURN p.name, s.name, s.type, e.name, e.type\nLIMIT 100\n</code></pre>"},{"location":"user-guide/graph-model/#find-elements-without-materials","title":"Find Elements Without Materials","text":"<pre><code>MATCH (e:Element)\nWHERE NOT (e)-[:HAS_MATERIAL]-&gt;()\nRETURN e.type, e.name\n</code></pre>"},{"location":"user-guide/graph-model/#count-elements-per-storey","title":"Count Elements per Storey","text":"<pre><code>MATCH (s:Structure)-[:CONTAINS]-&gt;(e:Element)\nWHERE s.type = 'IfcBuildingStorey'\nRETURN s.name, s.elevation, count(e) as element_count\nORDER BY s.elevation\n</code></pre>"},{"location":"user-guide/graph-model/#find-most-common-materials","title":"Find Most Common Materials","text":"<pre><code>MATCH (e:Element)-[:HAS_MATERIAL]-&gt;(m:Material)\nRETURN m.name, count(e) as usage_count\nORDER BY usage_count DESC\nLIMIT 10\n</code></pre>"},{"location":"user-guide/graph-model/#elements-by-type-and-storey","title":"Elements by Type and Storey","text":"<pre><code>MATCH (s:Structure)-[:CONTAINS]-&gt;(e:Element)\nWHERE s.type = 'IfcBuildingStorey'\nRETURN s.name, e.type, count(e) as count\nORDER BY s.elevation, e.type\n</code></pre>"},{"location":"user-guide/graph-model/#graph-visualization","title":"Graph Visualization","text":"<p>To visualize the graph in Neo4j Browser:</p>"},{"location":"user-guide/graph-model/#view-all-node-types","title":"View All Node Types","text":"<pre><code>CALL db.schema.visualization()\n</code></pre>"},{"location":"user-guide/graph-model/#sample-of-the-graph","title":"Sample of the Graph","text":"<pre><code>MATCH (n)\nOPTIONAL MATCH (n)-[r]-&gt;(m)\nRETURN n, r, m\nLIMIT 100\n</code></pre>"},{"location":"user-guide/graph-model/#view-element-distribution","title":"View Element Distribution","text":"<pre><code>MATCH (e:Element)\nRETURN e.type as Type, count(*) as Count\nORDER BY Count DESC\n</code></pre>"},{"location":"user-guide/graph-model/#performance-tips","title":"Performance Tips","text":""},{"location":"user-guide/graph-model/#create-indexes","title":"Create Indexes","text":"<p>For better query performance, create indexes on frequently queried properties:</p> <pre><code>// Index on Element type\nCREATE INDEX element_type IF NOT EXISTS FOR (e:Element) ON (e.type)\n\n// Index on Element guid\nCREATE INDEX element_guid IF NOT EXISTS FOR (e:Element) ON (e.guid)\n\n// Index on Structure type\nCREATE INDEX structure_type IF NOT EXISTS FOR (s:Structure) ON (s.type)\n\n// Index on Material name\nCREATE INDEX material_name IF NOT EXISTS FOR (m:Material) ON (m.name)\n</code></pre>"},{"location":"user-guide/graph-model/#use-profile-for-query-analysis","title":"Use PROFILE for Query Analysis","text":"<pre><code>PROFILE\nMATCH (e:Element)-[:HAS_MATERIAL]-&gt;(m:Material)\nWHERE e.type = 'IfcWall'\nRETURN e.name, m.name\n</code></pre>"},{"location":"user-guide/graph-model/#schema-diagram","title":"Schema Diagram","text":"<pre><code>                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502       Project        \u2502\n                    \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n                    \u2502 id: String           \u2502\n                    \u2502 name: String         \u2502\n                    \u2502 type: String         \u2502\n                    \u2502 description: String  \u2502\n                    \u2502 phase: String        \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502\n                               \u2502 CONTAINS\n                               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     Structure     \u2502     \u2502       Element        \u2502     \u2502     Material      \u2502\n\u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n\u2502 id: String        \u2502     \u2502 id: String           \u2502     \u2502 id: String        \u2502\n\u2502 name: String      \u2502 \u2500\u2500\u25ba \u2502 name: String         \u2502 \u2500\u2500\u25ba \u2502 name: String      \u2502\n\u2502 type: String      \u2502     \u2502 guid: String         \u2502     \u2502 category: String  \u2502\n\u2502 long_name: String \u2502     \u2502 type: String         \u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502 elevation: Float  \u2502     \u2502 object_type: String  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502 description: String  \u2502\n     CONTAINS             \u2502 tag: String          \u2502\n                          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u25b2\n                                    \u2502 HAS_MATERIAL\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      Metadata        \u2502\n\u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n\u2502 timestamp: String    \u2502\n\u2502 count: Integer       \u2502\n\u2502 types: String        \u2502\n\u2502 ifc_file: String     \u2502\n\u2502 duration: Float      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/graph-model/#see-also","title":"See Also","text":"<ul> <li>Python API - Programmatic access</li> <li>Neo4j Cypher Manual - Official Cypher documentation</li> </ul>"},{"location":"user-guide/python-api/","title":"Python API","text":"<p>Use <code>ifc-graph</code> as a Python library for programmatic control over IFC processing and Neo4j storage.</p>"},{"location":"user-guide/python-api/#installation","title":"Installation","text":"<pre><code>pip install ifc-graph\n</code></pre>"},{"location":"user-guide/python-api/#quick-start","title":"Quick Start","text":"<pre><code>from ifc_graph import filter_physical_elements, save_to_neo4j\n\n# Extract elements from IFC file\nelements, ifc_file = filter_physical_elements(\n    \"path/to/model.ifc\",\n    element_types=['IfcWall', 'IfcDoor', 'IfcWindow']\n)\n\nprint(f\"Found {sum(len(e) for e in elements.values())} elements\")\n\n# Store in Neo4j\nstats = save_to_neo4j(\n    elements,\n    ifc_file,\n    uri=\"bolt://localhost:7687\",\n    username=\"neo4j\",\n    password=\"your_password\"\n)\n\nprint(f\"Created {stats['elements']} elements\")\nprint(f\"Created {stats['structures']} structures\")\nprint(f\"Linked {stats['materials']} materials\")\n</code></pre>"},{"location":"user-guide/python-api/#core-functions","title":"Core Functions","text":""},{"location":"user-guide/python-api/#filter_physical_elements","title":"filter_physical_elements","text":"<p>Extracts building elements from an IFC file.</p> <pre><code>from ifc_graph import filter_physical_elements\n\nelements, ifc_file = filter_physical_elements(\n    ifc_file_path=\"model.ifc\",\n    element_types=['IfcWall', 'IfcDoor', 'IfcWindow', 'IfcColumn'],\n    config={\n        'include_property_sets': True,\n        'include_materials': True,\n        'max_properties_per_element': 50,\n    }\n)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>ifc_file_path</code> <code>str</code> Path to the IFC file <code>element_types</code> <code>list[str]</code> IFC element types to extract (optional) <code>config</code> <code>dict</code> Extraction configuration (optional) <p>Returns:</p> <ul> <li><code>elements</code>: Dictionary mapping element types to lists of IFC elements</li> <li><code>ifc_file</code>: The loaded ifcopenshell file object</li> </ul> <p>Example - Extract Only Structural Elements:</p> <pre><code>elements, ifc_file = filter_physical_elements(\n    \"building.ifc\",\n    element_types=['IfcColumn', 'IfcBeam', 'IfcSlab', 'IfcFooting']\n)\n\nfor element_type, elems in elements.items():\n    print(f\"{element_type}: {len(elems)} elements\")\n</code></pre>"},{"location":"user-guide/python-api/#save_to_neo4j","title":"save_to_neo4j","text":"<p>Saves extracted elements to a Neo4j database.</p> <pre><code>from ifc_graph import save_to_neo4j\n\nstats = save_to_neo4j(\n    filtered_elements=elements,\n    ifc_file=ifc_file,\n    uri=\"bolt://localhost:7687\",\n    username=\"neo4j\",\n    password=\"password\",\n    clear_db=False,\n    config={\n        'include_materials': True,\n        'include_property_sets': True,\n    }\n)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>filtered_elements</code> <code>dict</code> Elements from <code>filter_physical_elements()</code> <code>ifc_file</code> <code>ifcopenshell.file</code> Loaded IFC file object <code>uri</code> <code>str</code> Neo4j connection URI <code>username</code> <code>str</code> Neo4j username <code>password</code> <code>str</code> Neo4j password <code>clear_db</code> <code>bool</code> Clear database before import (default: False) <code>config</code> <code>dict</code> Extraction configuration (optional) <p>Returns:</p> <p>Dictionary with import statistics:</p> <pre><code>{\n    'elements': 150,      # Number of element nodes created\n    'structures': 12,     # Number of structure nodes created\n    'materials': 45,      # Number of material relationships\n    'property_sets': 0,   # Reserved for future use\n}\n</code></pre>"},{"location":"user-guide/python-api/#classes","title":"Classes","text":""},{"location":"user-guide/python-api/#ifcelementfilter","title":"IFCElementFilter","text":"<p>Object-oriented interface for element extraction.</p> <pre><code>from ifc_graph import IFCElementFilter\n\n# Initialize filter\nfilter = IFCElementFilter(\n    file_path=\"model.ifc\",\n    config={\n        'include_property_sets': True,\n        'include_materials': True,\n    }\n)\n\n# Load IFC file\nifc_file = filter.load()\n\n# Extract elements\nelements, ifc_file = filter.extract_elements(\n    element_types=['IfcWall', 'IfcDoor']\n)\n</code></pre>"},{"location":"user-guide/python-api/#neo4jconnection","title":"Neo4jConnection","text":"<p>Manages database connections with retry logic and proper cleanup.</p> <pre><code>from ifc_graph import Neo4jConnection\n\n# Using context manager (recommended)\nwith Neo4jConnection(\n    uri=\"bolt://localhost:7687\",\n    username=\"neo4j\",\n    password=\"password\",\n    max_retries=3,\n    retry_delay=1.0\n) as conn:\n    with conn.session() as session:\n        result = session.run(\"MATCH (n:Element) RETURN count(n)\")\n        print(result.single()[0])\n\n# Manual connection management\nconn = Neo4jConnection(uri, username, password)\ntry:\n    conn.connect()\n    with conn.session() as session:\n        # Use session\n        pass\nfinally:\n    conn.close()\n</code></pre>"},{"location":"user-guide/python-api/#queryloader","title":"QueryLoader","text":"<p>Load Cypher queries from external files.</p> <pre><code>from ifc_graph import QueryLoader\n\n# Create loader\nloader = QueryLoader(use_cache=True)\n\n# List available queries\nqueries = loader.list_queries()\nprint(queries)  # ['clear_database', 'create_elements_batch', ...]\n\n# Load a query\nquery = loader.load(\"create_elements_batch\")\nprint(query)\n</code></pre>"},{"location":"user-guide/python-api/#helper-functions","title":"Helper Functions","text":""},{"location":"user-guide/python-api/#load_ifc_file","title":"load_ifc_file","text":"<p>Load an IFC file with validation.</p> <pre><code>from ifc_graph import load_ifc_file\n\nifc_file = load_ifc_file(\"model.ifc\")\nprint(f\"Loaded {len(ifc_file.by_type('IfcWall'))} walls\")\n</code></pre>"},{"location":"user-guide/python-api/#extract_element_properties","title":"extract_element_properties","text":"<p>Extract properties from a single IFC element.</p> <pre><code>from ifc_graph import extract_element_properties\n\nelement = ifc_file.by_type('IfcWall')[0]\nprops = extract_element_properties(element, config={})\n\nprint(props)\n# {\n#     'id': '123',\n#     'name': 'Basic Wall:Generic - 200mm:456',\n#     'guid': '2O2Fr$t4X7Zf8NOew3FLyT',\n#     'type': 'IfcWall',\n#     'object_type': 'Basic Wall:Generic - 200mm',\n#     'description': '',\n#     'tag': '456'\n# }\n</code></pre>"},{"location":"user-guide/python-api/#extract_spatial_info","title":"extract_spatial_info","text":"<p>Get spatial containment information for an element.</p> <pre><code>from ifc_graph import extract_spatial_info\n\nelement = ifc_file.by_type('IfcWall')[0]\nspatial = extract_spatial_info(element)\n\nfor info in spatial:\n    print(f\"Contained in: {info['name']} ({info['type']})\")\n</code></pre>"},{"location":"user-guide/python-api/#extract_material_info","title":"extract_material_info","text":"<p>Get material information for an element.</p> <pre><code>from ifc_graph import extract_material_info\n\nelement = ifc_file.by_type('IfcWall')[0]\nmaterials = extract_material_info(element)\n\nfor mat in materials:\n    print(f\"Material: {mat['material_name']} ({mat['material_category']})\")\n</code></pre>"},{"location":"user-guide/python-api/#extract_property_sets","title":"extract_property_sets","text":"<p>Get property sets for an element.</p> <pre><code>from ifc_graph import extract_property_sets\n\nelement = ifc_file.by_type('IfcWall')[0]\npsets = extract_property_sets(element, max_properties=50)\n\nfor pset in psets:\n    print(f\"Property Set: {pset['pset_name']}\")\n    for name, value in pset['properties'].items():\n        print(f\"  {name}: {value}\")\n</code></pre>"},{"location":"user-guide/python-api/#exception-handling","title":"Exception Handling","text":"<p>The library provides specific exceptions for error handling:</p> <pre><code>from ifc_graph import (\n    IFCLoadError,\n    IFCValidationError,\n    DatabaseConnectionError,\n    DatabaseOperationError,\n)\n\ntry:\n    elements, ifc_file = filter_physical_elements(\"model.ifc\")\n    stats = save_to_neo4j(elements, ifc_file, uri, user, password)\n\nexcept IFCValidationError as e:\n    print(f\"Invalid IFC file: {e}\")\n    # File doesn't exist, wrong extension, empty file\n\nexcept IFCLoadError as e:\n    print(f\"Failed to load IFC file: {e}\")\n    # ifcopenshell couldn't parse the file\n\nexcept DatabaseConnectionError as e:\n    print(f\"Cannot connect to Neo4j: {e}\")\n    # Wrong URI, credentials, or Neo4j not running\n\nexcept DatabaseOperationError as e:\n    print(f\"Database operation failed: {e}\")\n    # Query error, constraint violation, etc.\n</code></pre>"},{"location":"user-guide/python-api/#complete-example","title":"Complete Example","text":"<pre><code>#!/usr/bin/env python3\n\"\"\"Complete example of processing an IFC file to Neo4j.\"\"\"\n\nfrom ifc_graph import (\n    filter_physical_elements,\n    save_to_neo4j,\n    IFCLoadError,\n    IFCValidationError,\n    DatabaseConnectionError,\n    DatabaseOperationError,\n)\n\n# Configuration\nIFC_FILE = \"building.ifc\"\nNEO4J_URI = \"bolt://localhost:7687\"\nNEO4J_USER = \"neo4j\"\nNEO4J_PASSWORD = \"your_password\"\n\n# Element types to extract\nELEMENT_TYPES = [\n    'IfcWall',\n    'IfcWallStandardCase',\n    'IfcDoor',\n    'IfcWindow',\n    'IfcColumn',\n    'IfcBeam',\n    'IfcSlab',\n    'IfcStair',\n    'IfcRoof',\n]\n\ndef main():\n    try:\n        # Extract elements\n        print(f\"Loading IFC file: {IFC_FILE}\")\n        elements, ifc_file = filter_physical_elements(\n            IFC_FILE,\n            element_types=ELEMENT_TYPES,\n            config={\n                'include_property_sets': True,\n                'include_materials': True,\n                'max_properties_per_element': 50,\n            }\n        )\n\n        total = sum(len(e) for e in elements.values())\n        print(f\"Found {total} elements\")\n\n        # Show breakdown by type\n        for elem_type, elems in elements.items():\n            print(f\"  {elem_type}: {len(elems)}\")\n\n        # Save to Neo4j\n        print(f\"\\nSaving to Neo4j at {NEO4J_URI}\")\n        stats = save_to_neo4j(\n            elements,\n            ifc_file,\n            uri=NEO4J_URI,\n            username=NEO4J_USER,\n            password=NEO4J_PASSWORD,\n            clear_db=True,  # Start fresh\n        )\n\n        print(\"\\nImport complete!\")\n        print(f\"  Elements: {stats['elements']}\")\n        print(f\"  Structures: {stats['structures']}\")\n        print(f\"  Materials: {stats['materials']}\")\n\n    except IFCValidationError as e:\n        print(f\"Error: Invalid IFC file - {e}\")\n        return 1\n\n    except IFCLoadError as e:\n        print(f\"Error: Failed to load IFC file - {e}\")\n        return 1\n\n    except DatabaseConnectionError as e:\n        print(f\"Error: Cannot connect to Neo4j - {e}\")\n        return 1\n\n    except DatabaseOperationError as e:\n        print(f\"Error: Database operation failed - {e}\")\n        return 1\n\n    return 0\n\nif __name__ == \"__main__\":\n    exit(main())\n</code></pre>"},{"location":"user-guide/python-api/#see-also","title":"See Also","text":"<ul> <li>API Reference - Detailed API documentation</li> <li>Graph Model - Understanding the Neo4j graph structure</li> </ul>"}]}